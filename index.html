<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MAPPAGURU Online - Asesmen Online</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .card-shadow {
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    .input-field {
      transition: all 0.3s ease;
    }
    
    .input-field:focus {
      transform: translateY(-2px);
      box-shadow: 0 4px 6px -1px rgba(102, 126, 234, 0.3);
    }
    
    .btn-primary {
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 15px -3px rgba(102, 126, 234, 0.4);
    }
    
    .test-card {
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .test-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px -5px rgba(102, 126, 234, 0.3);
    }
    
    .progress-bar {
      transition: width 0.3s ease;
    }
    
    .question-card {
      animation: fadeIn 0.5s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .radio-custom:checked + label {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-color: #667eea;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="app" class="h-full w-full flex flex-col gradient-bg overflow-auto"><!-- Header -->
   <header class="bg-white shadow-md py-3 px-4 sm:py-4 sm:px-6">
    <div class="max-w-6xl mx-auto">
     <h1 id="appTitle" class="text-lg sm:text-xl md:text-2xl font-bold text-center text-gray-800">MAPPAGURU ONLINE-Asesmen Online</h1>
     <p id="currentDate" class="text-center text-gray-600 mt-1 text-xs sm:text-sm"></p>
    </div>
   </header><!-- Main Content -->
   <main class="flex-1 p-4 sm:p-6">
    <div class="max-w-6xl mx-auto"><!-- Biodata Section -->
     <div id="biodataSection" class="bg-white rounded-xl sm:rounded-2xl card-shadow p-4 sm:p-6 md:p-8 mb-4 sm:mb-6">
      <div class="text-center mb-6 sm:mb-8">
       <div class="inline-block bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-full p-3 sm:p-4 mb-3 sm:mb-4">
        <svg class="w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
        </svg>
       </div>
       <h2 class="text-xl sm:text-2xl md:text-3xl font-bold text-gray-800 mb-2">Biodata Peserta</h2>
       <p class="text-sm sm:text-base text-gray-600">Silakan lengkapi data diri Anda untuk memulai asesmen</p>
      </div>
      <form id="biodataForm" class="space-y-4 sm:space-y-6 max-w-2xl mx-auto">
       <div><label for="nama" class="block text-sm font-semibold text-gray-700 mb-2">Nama Lengkap</label> <input type="text" id="nama" name="nama" required class="input-field w-full px-3 py-2 sm:px-4 sm:py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 text-sm sm:text-base" placeholder="Masukkan nama lengkap Anda">
       </div>
       <div><label for="umur" class="block text-sm font-semibold text-gray-700 mb-2">Umur</label> <input type="number" id="umur" name="umur" required min="5" max="100" class="input-field w-full px-3 py-2 sm:px-4 sm:py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 text-sm sm:text-base" placeholder="Masukkan umur Anda">
       </div>
       <div><label class="block text-sm font-semibold text-gray-700 mb-2 sm:mb-3">Jenis Kelamin</label>
        <div class="flex gap-3 sm:gap-4"><label class="flex-1 cursor-pointer"> <input type="radio" name="jenisKelamin" value="Laki-laki" required class="peer hidden">
          <div class="border-2 border-gray-300 rounded-lg p-3 sm:p-4 text-center peer-checked:border-purple-500 peer-checked:bg-purple-50 transition-all hover:border-purple-300">
           <svg class="w-6 h-6 sm:w-8 sm:h-8 mx-auto mb-1 sm:mb-2 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
           </svg><span class="text-sm sm:text-base font-semibold text-gray-700">Laki-laki</span>
          </div></label> <label class="flex-1 cursor-pointer"> <input type="radio" name="jenisKelamin" value="Perempuan" required class="peer hidden">
          <div class="border-2 border-gray-300 rounded-lg p-3 sm:p-4 text-center peer-checked:border-purple-500 peer-checked:bg-purple-50 transition-all hover:border-purple-300">
           <svg class="w-6 h-6 sm:w-8 sm:h-8 mx-auto mb-1 sm:mb-2 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
           </svg><span class="text-sm sm:text-base font-semibold text-gray-700">Perempuan</span>
          </div></label>
        </div>
       </div><button type="submit" class="btn-primary w-full bg-gradient-to-r from-purple-500 to-indigo-600 text-white font-bold py-3 sm:py-4 rounded-lg hover:from-purple-600 hover:to-indigo-700 text-sm sm:text-base"> Simpan &amp; Lanjutkan </button>
      </form>
     </div><!-- Test Menu Section -->
     <div id="testMenuSection" class="hidden">
      <div class="bg-white rounded-xl sm:rounded-2xl card-shadow p-4 sm:p-6 md:p-8 mb-4 sm:mb-6">
       <div class="text-center mb-6 sm:mb-8">
        <h2 class="text-xl sm:text-2xl md:text-3xl font-bold text-gray-800 mb-2">Selamat Datang, <span id="welcomeName"></span>! üëã</h2>
        <p class="text-sm sm:text-base text-gray-600">Pilih jenis tes yang ingin Anda ikuti</p>
       </div>
       <div class="grid sm:grid-cols-2 gap-4 sm:gap-6"><!-- Tes Gaya Belajar -->
        <div class="test-card bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg sm:rounded-xl p-4 sm:p-6 border-2 border-blue-200" onclick="startTest('gayaBelajar')">
         <div class="flex items-center mb-3 sm:mb-4">
          <div class="bg-blue-500 text-white rounded-full p-2 sm:p-3 mr-3 sm:mr-4">
           <svg class="w-6 h-6 sm:w-8 sm:h-8" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
           </svg>
          </div>
          <div>
           <h3 class="text-lg sm:text-xl font-bold text-gray-800">Tes Gaya Belajar</h3>
           <p class="text-xs sm:text-sm text-gray-600">50 Pertanyaan</p>
          </div>
         </div>
         <p class="text-sm sm:text-base text-gray-700 mb-3 sm:mb-4">Kenali gaya belajar Anda: Visual, Auditori, atau Kinestetik</p>
         <div class="flex items-center text-xs sm:text-sm text-gray-600">
          <svg class="w-3 h-3 sm:w-4 sm:h-4 mr-1" fill="currentColor" viewbox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
          </svg><span>¬± 15 menit</span>
         </div>
        </div><!-- Tes Kemampuan -->
        <div class="test-card bg-gradient-to-br from-green-50 to-green-100 rounded-lg sm:rounded-xl p-4 sm:p-6 border-2 border-green-200" onclick="startTest('kemampuan')">
         <div class="flex items-center mb-3 sm:mb-4">
          <div class="bg-green-500 text-white rounded-full p-2 sm:p-3 mr-3 sm:mr-4">
           <svg class="w-6 h-6 sm:w-8 sm:h-8" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
           </svg>
          </div>
          <div>
           <h3 class="text-lg sm:text-xl font-bold text-gray-800">Tes Kemampuan</h3>
           <p class="text-xs sm:text-sm text-gray-600">50 Pertanyaan</p>
          </div>
         </div>
         <p class="text-sm sm:text-base text-gray-700 mb-3 sm:mb-4">Ukur kemampuan kognitif Anda dalam berbagai aspek</p>
         <div class="flex items-center text-xs sm:text-sm text-gray-600">
          <svg class="w-3 h-3 sm:w-4 sm:h-4 mr-1" fill="currentColor" viewbox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
          </svg><span>¬± 15 menit</span>
         </div>
        </div><!-- Tes Kepribadian -->
        <div class="test-card bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg sm:rounded-xl p-4 sm:p-6 border-2 border-purple-200" onclick="startTest('kepribadian')">
         <div class="flex items-center mb-3 sm:mb-4">
          <div class="bg-purple-500 text-white rounded-full p-2 sm:p-3 mr-3 sm:mr-4">
           <svg class="w-6 h-6 sm:w-8 sm:h-8" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
           </svg>
          </div>
          <div>
           <h3 class="text-lg sm:text-xl font-bold text-gray-800">Tes Kepribadian</h3>
           <p class="text-xs sm:text-sm text-gray-600">50 Pertanyaan</p>
          </div>
         </div>
         <p class="text-sm sm:text-base text-gray-700 mb-3 sm:mb-4">Analisis kepribadian berdasarkan Big Five Personality</p>
         <div class="flex items-center text-xs sm:text-sm text-gray-600">
          <svg class="w-3 h-3 sm:w-4 sm:h-4 mr-1" fill="currentColor" viewbox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
          </svg><span>¬± 15 menit</span>
         </div>
        </div><!-- Tes Minat Mata Pelajaran -->
        <div class="test-card bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg sm:rounded-xl p-4 sm:p-6 border-2 border-orange-200" onclick="startTest('minatMapel')">
         <div class="flex items-center mb-3 sm:mb-4">
          <div class="bg-orange-500 text-white rounded-full p-2 sm:p-3 mr-3 sm:mr-4">
           <svg class="w-6 h-6 sm:w-8 sm:h-8" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
           </svg>
          </div>
          <div>
           <h3 class="text-lg sm:text-xl font-bold text-gray-800">Tes Minat Mapel</h3>
           <p class="text-xs sm:text-sm text-gray-600">50 Pertanyaan</p>
          </div>
         </div>
         <p class="text-sm sm:text-base text-gray-700 mb-3 sm:mb-4">Temukan minat Anda terhadap berbagai mata pelajaran</p>
         <div class="flex items-center text-xs sm:text-sm text-gray-600">
          <svg class="w-3 h-3 sm:w-4 sm:h-4 mr-1" fill="currentColor" viewbox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
          </svg><span>¬± 15 menit</span>
         </div>
        </div>
       </div>
       <div class="mt-6 sm:mt-8 flex flex-col sm:flex-row justify-center gap-3 sm:gap-4"><button onclick="editBiodata()" class="bg-gradient-to-r from-yellow-500 to-orange-600 text-white font-bold py-2.5 sm:py-3 px-4 sm:px-6 rounded-lg hover:from-yellow-600 hover:to-orange-700 transition-all flex items-center justify-center gap-2 text-sm sm:text-base">
         <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
         </svg> Edit Biodata </button> <button onclick="viewResults()" class="btn-primary bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-bold py-2.5 sm:py-3 px-4 sm:px-6 rounded-lg hover:from-indigo-600 hover:to-purple-700 flex items-center justify-center gap-2 text-sm sm:text-base">
         <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path>
         </svg> Lihat Hasil Tes </button> <button onclick="showDeveloperInfo()" class="bg-gradient-to-r from-teal-500 to-cyan-600 text-white font-bold py-2.5 sm:py-3 px-4 sm:px-6 rounded-lg hover:from-teal-600 hover:to-cyan-700 transition-all flex items-center justify-center gap-2 text-sm sm:text-base">
         <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
         </svg> Info Pembuat </button>
       </div>
      </div>
     </div><!-- Test Instructions Section -->
     <div id="testInstructionsSection" class="hidden">
      <div class="bg-white rounded-2xl card-shadow p-8">
       <div class="text-center mb-6">
        <div id="instructionIcon" class="inline-block text-white rounded-full p-4 mb-4">
         <svg class="w-12 h-12" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
         </svg>
        </div>
        <h2 id="instructionTitle" class="text-3xl font-bold text-gray-800 mb-2"></h2>
        <p id="instructionTheory" class="text-gray-600 italic"></p>
       </div>
       <div class="space-y-6 max-w-4xl mx-auto"><!-- Definition -->
        <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border-2 border-blue-200">
         <h3 class="text-xl font-bold text-gray-800 mb-3 flex items-center">
          <svg class="w-6 h-6 mr-2 text-blue-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
          </svg> Definisi</h3>
         <p id="instructionDefinition" class="text-gray-700 leading-relaxed"></p>
        </div><!-- Purpose -->
        <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border-2 border-green-200">
         <h3 class="text-xl font-bold text-gray-800 mb-3 flex items-center">
          <svg class="w-6 h-6 mr-2 text-green-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
          </svg> Tujuan Tes</h3>
         <p id="instructionPurpose" class="text-gray-700 leading-relaxed"></p>
        </div><!-- Benefits -->
        <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200">
         <h3 class="text-xl font-bold text-gray-800 mb-3 flex items-center">
          <svg class="w-6 h-6 mr-2 text-purple-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
          </svg> Manfaat</h3>
         <ul id="instructionBenefits" class="text-gray-700 leading-relaxed space-y-2"></ul>
        </div><!-- Instructions -->
        <div class="bg-gradient-to-br from-orange-50 to-yellow-50 rounded-xl p-6 border-2 border-orange-200">
         <h3 class="text-xl font-bold text-gray-800 mb-3 flex items-center">
          <svg class="w-6 h-6 mr-2 text-orange-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
          </svg> Petunjuk Pengerjaan</h3>
         <ul class="text-gray-700 leading-relaxed space-y-2">
          <li class="flex items-start"><span class="text-orange-600 font-bold mr-2">1.</span> <span>Baca setiap pernyataan dengan teliti dan jawab sesuai dengan kondisi diri Anda yang sebenarnya</span></li>
          <li class="flex items-start"><span class="text-orange-600 font-bold mr-2">2.</span> <span>Tidak ada jawaban yang benar atau salah, pilih jawaban yang paling menggambarkan diri Anda</span></li>
          <li class="flex items-start"><span class="text-orange-600 font-bold mr-2">3.</span> <span>Tes terdiri dari 50 pertanyaan dengan waktu pengerjaan sekitar 15 menit</span></li>
          <li class="flex items-start"><span class="text-orange-600 font-bold mr-2">4.</span> <span>Jawaban Anda akan tersimpan otomatis dan dapat dilanjutkan kapan saja</span></li>
          <li class="flex items-start"><span class="text-orange-600 font-bold mr-2">5.</span> <span>Gunakan tombol "Sebelumnya" dan "Selanjutnya" untuk navigasi antar pertanyaan</span></li>
         </ul>
        </div>
       </div>
       <div class="flex justify-center gap-4 mt-8"><button onclick="backToMenuFromInstructions()" class="bg-gray-300 text-gray-700 font-bold py-3 px-8 rounded-lg hover:bg-gray-400 transition-all"> ‚Üê Kembali </button> <button onclick="startTestFromInstructions()" class="btn-primary bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-3 px-8 rounded-lg hover:from-green-600 hover:to-emerald-700"> Mulai Tes ‚Üí </button>
       </div>
      </div>
     </div><!-- Test Section -->
     <div id="testSection" class="hidden">
      <div class="bg-white rounded-xl sm:rounded-2xl card-shadow p-4 sm:p-6 md:p-8">
       <div class="mb-4 sm:mb-6">
        <div class="flex justify-between items-center mb-2">
         <h2 id="testTitle" class="text-lg sm:text-xl md:text-2xl font-bold text-gray-800"></h2><span id="questionCounter" class="text-sm sm:text-base md:text-lg font-semibold text-purple-600"></span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-2 sm:h-3">
         <div id="progressBar" class="progress-bar bg-gradient-to-r from-purple-500 to-indigo-600 h-2 sm:h-3 rounded-full" style="width: 0%"></div>
        </div>
       </div>
       <div id="questionContainer" class="question-card mb-4 sm:mb-6">
        <h3 id="questionText" class="text-base sm:text-lg md:text-xl font-semibold text-gray-800 mb-4 sm:mb-6"></h3>
        <div id="optionsContainer" class="space-y-2 sm:space-y-3"></div>
       </div>
       <div class="flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-2 sm:gap-4"><button id="prevBtn" onclick="previousQuestion()" class="bg-gray-300 text-gray-700 font-semibold py-2.5 sm:py-3 px-4 sm:px-6 rounded-lg hover:bg-gray-400 transition-all text-sm sm:text-base"> ‚Üê Sebelumnya </button> <button onclick="backToMenuFromTest()" class="bg-red-500 text-white font-semibold py-2.5 sm:py-3 px-4 sm:px-6 rounded-lg hover:bg-red-600 transition-all text-sm sm:text-base"> üè† Menu </button> <button id="nextBtn" onclick="nextQuestion()" class="btn-primary bg-gradient-to-r from-purple-500 to-indigo-600 text-white font-semibold py-2.5 sm:py-3 px-4 sm:px-6 rounded-lg hover:from-purple-600 hover:to-indigo-700 text-sm sm:text-base"> Selanjutnya ‚Üí </button>
       </div>
      </div>
     </div><!-- Results Section -->
     <div id="resultsSection" class="hidden">
      <div class="bg-white rounded-2xl card-shadow p-8">
       <div class="text-center mb-8">
        <div class="inline-block bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-full p-4 mb-4">
         <svg class="w-12 h-12" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
         </svg>
        </div>
        <h2 class="text-3xl font-bold text-gray-800 mb-2">Hasil Asesmen</h2>
        <p class="text-gray-600">Berikut adalah hasil lengkap dari tes yang telah Anda ikuti</p>
       </div>
       <div id="resultsContainer" class="space-y-8"></div>
       <div class="mt-8 flex justify-center gap-4 flex-wrap"><button onclick="downloadAllPDF()" class="btn-primary bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-3 px-6 sm:px-8 rounded-lg hover:from-green-600 hover:to-emerald-700 text-sm sm:text-base"> üì• Unduh Semua Hasil (PDF) </button> <button onclick="resetAllTests()" class="btn-primary bg-gradient-to-r from-red-500 to-rose-600 text-white font-bold py-3 px-6 sm:px-8 rounded-lg hover:from-red-600 hover:to-rose-700 text-sm sm:text-base"> üîÑ Reset Semua Hasil Tes </button> <button onclick="backToMenu()" class="btn-primary bg-gradient-to-r from-purple-500 to-indigo-600 text-white font-bold py-3 px-6 sm:px-8 rounded-lg hover:from-purple-600 hover:to-indigo-700 text-sm sm:text-base"> Kembali ke Menu </button>
       </div>
      </div>
     </div>
    </div>
   </main><!-- Footer -->
   <footer class="bg-white shadow-md py-3 px-4 sm:py-4 sm:px-6 mt-auto">
    <div class="max-w-6xl mx-auto text-center">
     <p class="text-xs sm:text-sm md:text-base text-gray-700 font-semibold">Dikembangkan oleh <span id="developerName" class="text-purple-600">MUHAMMAD HASRATUL</span></p>
     <p class="text-gray-600 text-xs sm:text-sm mt-1" id="currentYear"></p>
    </div>
   </footer>
  </div>
  <script>
    const defaultConfig = {
      app_title: "MAPPAGURU ONLINE-Asesmen Online",
      developer_name: "MUHAMMAD HASRATUL",
      primary_color: "#667eea",
      secondary_color: "#764ba2",
      text_color: "#1f2937",
      background_color: "#ffffff",
      accent_color: "#8b5cf6"
    };

    let config = { ...defaultConfig };
    let currentTest = '';
    let currentQuestionIndex = 0;
    let answers = {};
    
    // Test Instructions Data
    const testInstructions = {
      gayaBelajar: {
        title: "Tes Gaya Belajar",
        theory: "Berdasarkan teori VAK (Visual, Auditory, Kinesthetic) oleh Neil Fleming",
        icon: "bg-gradient-to-r from-blue-500 to-blue-600",
        definition: "Tes Gaya Belajar adalah instrumen asesmen yang dirancang untuk mengidentifikasi preferensi modalitas belajar seseorang berdasarkan teori VAK (Visual, Auditory, Kinesthetic) yang dikembangkan oleh Neil Fleming pada tahun 1987. Teori ini menyatakan bahwa setiap individu memiliki cara yang berbeda-beda dalam menerima, memproses, dan mengingat informasi melalui tiga saluran sensorik utama: visual (penglihatan), auditori (pendengaran), dan kinestetik (gerakan dan sentuhan). Peserta dengan gaya visual dominan cenderung belajar lebih baik melalui gambar, diagram, dan representasi visual lainnya. Peserta auditori lebih efektif belajar melalui mendengar penjelasan, diskusi, dan instruksi verbal. Sementara peserta kinestetik memerlukan pengalaman langsung, gerakan fisik, dan praktik hands-on untuk memaksimalkan pembelajaran. Penelitian menunjukkan bahwa meskipun seseorang dapat memiliki kombinasi dari ketiga gaya ini, biasanya ada satu atau dua gaya yang lebih dominan dan efektif untuk proses pembelajaran mereka.",
        purpose: "Tujuan dari tes ini adalah untuk membantu peserta memahami cara belajar yang paling efektif dan alami bagi diri mereka sendiri. Dengan mengetahui gaya belajar dominan, peserta dapat mengoptimalkan strategi belajar, memilih metode pembelajaran yang sesuai dengan karakteristik individu, dan meningkatkan efektivitas penyerapan informasi dalam berbagai konteks pendidikan dan pelatihan. Tes ini juga membantu pendidik dan orang tua untuk menyesuaikan metode pengajaran agar lebih relevan dengan kebutuhan belajar masing-masing individu, sehingga dapat meningkatkan hasil akademis dan mengurangi kesulitan belajar yang mungkin timbul dari ketidaksesuaian metode pengajaran dengan gaya belajar peserta.",
        benefits: [
          "Mengidentifikasi metode belajar yang paling efektif dan alami untuk diri Anda",
          "Meningkatkan efisiensi waktu dan kecepatan dalam memahami materi pembelajaran",
          "Membantu guru dan instruktur menyesuaikan metode pengajaran dengan karakteristik siswa",
          "Mengurangi frustrasi dalam proses belajar dengan menggunakan pendekatan yang tepat",
          "Meningkatkan retensi informasi dan daya ingat jangka panjang secara signifikan",
          "Memberikan wawasan untuk pengembangan karir dan pemilihan profesi yang sesuai",
          "Memfasilitasi komunikasi yang lebih baik antara guru, siswa, dan orang tua",
          "Meningkatkan motivasi dan kepercayaan diri dalam proses pembelajaran"
        ]
      },
      kemampuan: {
        title: "Tes Kemampuan",
        theory: "Berdasarkan teori Multiple Intelligences oleh Howard Gardner",
        icon: "bg-gradient-to-r from-green-500 to-green-600",
        definition: "Tes Kemampuan Multiple Intelligences adalah instrumen evaluasi yang mengukur berbagai dimensi kecerdasan manusia berdasarkan teori revolusioner yang dikembangkan oleh psikolog dan profesor Harvard University, Howard Gardner, pada tahun 1983. Teori ini menantang pandangan tradisional yang menyatakan bahwa kecerdasan hanya terbatas pada kemampuan kognitif umum yang diukur melalui tes IQ. Gardner mengidentifikasi delapan jenis kecerdasan yang berbeda namun setara dalam pentingnya: (1) Linguistik - kemampuan menggunakan kata-kata secara efektif; (2) Logis-matematis - kemampuan berpikir logis dan menganalisis masalah; (3) Visual-spasial - kemampuan memvisualisasikan dan memanipulasi objek dalam ruang; (4) Musikal - kepekaan terhadap ritme, nada, dan melodi; (5) Kinestetik - kemampuan menggunakan tubuh untuk mengekspresikan ide dan perasaan; (6) Interpersonal - kemampuan memahami dan berinteraksi dengan orang lain; (7) Intrapersonal - kemampuan memahami diri sendiri; dan (8) Naturalis - kemampuan mengenali dan mengkategorikan fenomena alam. Setiap individu memiliki kombinasi unik dari kecerdasan-kecerdasan ini, dengan beberapa lebih dominan daripada yang lain.",
        purpose: "Tes ini bertujuan untuk memberikan profil kecerdasan yang komprehensif dan multi-dimensional bagi peserta, mengidentifikasi kekuatan dan area potensial dalam berbagai domain kemampuan. Hasil tes membantu individu memahami spektrum bakat mereka yang unik dan beragam, memberikan panduan konkret untuk pengembangan diri yang holistik, pemilihan karir yang sesuai dengan profil kecerdasan, dan strategi pembelajaran yang disesuaikan dengan kekuatan alami masing-masing. Tes ini sangat berguna untuk siswa, mahasiswa, profesional, dan siapa saja yang ingin memaksimalkan potensi mereka dengan memahami dan mengembangkan berbagai aspek kecerdasan yang dimiliki. Dengan pendekatan yang lebih inklusif terhadap konsep kecerdasan, tes ini membantu menghargai dan mengembangkan talenta yang mungkin tidak terukur dalam tes akademis tradisional.",
        benefits: [
          "Mengidentifikasi kekuatan dan bakat alami Anda di berbagai bidang kecerdasan",
          "Membantu dalam pemilihan jurusan pendidikan dan jalur karir yang optimal",
          "Memberikan wawasan untuk pengembangan kompetensi yang seimbang dan holistik",
          "Meningkatkan kepercayaan diri dengan mengenali dan menghargai potensi diri yang unik",
          "Memfasilitasi strategi pembelajaran yang personal, efektif, dan sesuai dengan profil kecerdasan",
          "Mendukung pengambilan keputusan strategis dalam pengembangan profesional",
          "Membantu pendidik mengembangkan kurikulum yang mengakomodasi berbagai jenis kecerdasan",
          "Memberikan perspektif baru tentang potensi dan kemampuan yang mungkin terabaikan",
          "Meningkatkan apresiasi terhadap keberagaman talenta dalam tim dan organisasi"
        ]
      },
      kepribadian: {
        title: "Tes Kepribadian",
        theory: "Berdasarkan teori Big Five Personality (OCEAN)",
        icon: "bg-gradient-to-r from-purple-500 to-purple-600",
        definition: "Tes Kepribadian Big Five adalah instrumen psikometrik yang mengukur lima dimensi fundamental kepribadian manusia, yang dikenal dengan akronim OCEAN: Openness (Keterbukaan terhadap pengalaman baru, kreativitas, dan keingintahuan intelektual), Conscientiousness (Kehati-hatian, tanggung jawab, disiplin, dan keteraturan), Extraversion (Ekstraversi, sosiabilitas, energi, dan kecenderungan mencari stimulasi sosial), Agreeableness (Keramahan, empati, kooperatif, dan kecenderungan untuk menjaga harmoni sosial), dan Neuroticism (Neurotisisme atau stabilitas emosional, yang mengukur kecenderungan mengalami emosi negatif). Model Big Five merupakan hasil penelitian empiris yang ekstensif selama lebih dari lima puluhan tahun yang melibatkan ribuan subjek penelitian di berbagai budaya dan negara. Model ini dianggap sebagai salah satu model kepribadian yang paling valid, reliabel, dan universal dalam psikologi modern, dengan aplikasi luas dalam psikologi klinis, psikologi organisasi, pendidikan, dan penelitian. Setiap dimensi dalam Big Five bersifat kontinum, bukan kategori biner, yang berarti setiap orang memiliki tingkat tertentu dari masing-masing trait, bukan hanya 'ada' atau 'tidak ada'.",
        purpose: "Tujuan tes ini adalah untuk memberikan profil kepribadian yang komprehensif, objektif, dan berdasarkan sains, membantu peserta memahami pola perilaku, preferensi, kecenderungan emosional, dan cara mereka berinteraksi dengan dunia dan orang lain. Pemahaman mendalam tentang kepribadian ini sangat berharga untuk pengembangan diri yang terarah, peningkatan kualitas hubungan interpersonal, pemilihan karir dan lingkungan kerja yang sesuai dengan karakteristik kepribadian, serta optimalisasi performa dalam berbagai konteks kehidupan personal dan profesional. Tes ini juga membantu individu memahami mengapa mereka bereaksi dengan cara tertentu dalam situasi berbeda, mengidentifikasi area yang perlu dikembangkan, dan memanfaatkan kekuatan kepribadian mereka secara optimal. Dalam konteks organisasi, hasil tes dapat digunakan untuk team building, leadership development, dan career planning.",
        benefits: [
          "Memahami karakteristik kepribadian dan pola perilaku diri sendiri secara mendalam",
          "Meningkatkan kesadaran diri (self-awareness) dan emotional intelligence secara signifikan",
          "Membantu dalam membangun hubungan interpersonal yang lebih sehat dan produktif",
          "Memberikan panduan ilmiah untuk pemilihan karir dan lingkungan kerja yang cocok",
          "Mengidentifikasi area pengembangan diri yang perlu ditingkatkan dengan spesifik",
          "Memfasilitasi komunikasi yang lebih efektif dengan orang lain yang memiliki kepribadian berbeda",
          "Membantu dalam manajemen stres dan pengembangan strategi coping yang sesuai",
          "Meningkatkan performa kerja dengan memahami kekuatan dan kelemahan personal",
          "Memberikan insight untuk pengembangan leadership skills yang autentik",
          "Membantu dalam resolusi konflik dan peningkatan dinamika tim"
        ]
      },
      minatMapel: {
        title: "Tes Minat Mata Pelajaran",
        theory: "Berdasarkan teori Holland's RIASEC dan Interest Inventory",
        icon: "bg-gradient-to-r from-orange-500 to-orange-600",
        definition: "Tes Minat Mata Pelajaran adalah instrumen asesmen yang dirancang untuk mengukur tingkat ketertarikan, preferensi, dan antusiasme siswa terhadap berbagai bidang akademik dan domain pengetahuan. Tes ini mengintegrasikan teori Holland's RIASEC (Realistic, Investigative, Artistic, Social, Enterprising, Conventional) yang dikembangkan oleh John Holland dengan inventori minat akademik, mengukur kecenderungan dan passion terhadap enam mata pelajaran utama: Matematika (kemampuan numerik dan logika), Bahasa (linguistik dan komunikasi), IPA/Sains (penelitian ilmiah dan eksperimen), IPS/Sosial (pemahaman masyarakat dan budaya), Olahraga (aktivitas fisik dan kinestetik), dan Seni (ekspresi kreatif dan estetika). Teori Holland menyatakan bahwa kepuasan dan kesuksesan karir seseorang sangat dipengaruhi oleh kesesuaian antara minat mereka dengan lingkungan kerja atau bidang studi. Tes ini dirancang khusus untuk konteks pendidikan Indonesia dengan mempertimbangkan kurikulum nasional dan struktur peminatan di sekolah menengah dan perguruan tinggi. Minat akademik yang teridentifikasi melalui tes ini merupakan indikator penting untuk prediksi kesuksesan akademis dan kepuasan dalam bidang studi tertentu.",
        purpose: "Tujuan utama tes ini adalah untuk membantu peserta mengidentifikasi bidang studi yang paling sesuai dengan minat intrinsik, bakat alami, dan potensi mereka. Hasil tes memberikan panduan yang konkret dan berbasis data dalam pemilihan peminatan akademik di SMA (IPA, IPS, Bahasa), program studi di perguruan tinggi, dan perencanaan karir jangka panjang. Dengan mengetahui minat akademik yang kuat, peserta dapat membuat keputusan pendidikan yang lebih terinformasi, strategis, dan sesuai dengan passion mereka, sehingga meningkatkan motivasi belajar intrinsik, performa akademis, dan kepuasan dalam proses pendidikan. Tes ini juga sangat berguna bagi guru BK (Bimbingan Konseling), orang tua, dan konselor pendidikan untuk memberikan guidance yang tepat dan personal kepada siswa dalam menentukan jalur pendidikan yang optimal. Dengan memilih bidang studi yang sesuai minat, siswa cenderung lebih termotivasi, lebih berhasil secara akademis, dan lebih puas dengan pilihan karir mereka di masa depan.",
        benefits: [
          "Mengidentifikasi bidang studi yang paling sesuai dengan minat dan passion Anda secara objektif",
          "Membantu dalam pemilihan jurusan atau peminatan di SMA/SMK dengan lebih percaya diri",
          "Memberikan panduan konkret untuk pemilihan program studi di perguruan tinggi",
          "Meningkatkan motivasi belajar intrinsik dengan fokus pada mata pelajaran yang diminati",
          "Memfasilitasi perencanaan karir jangka panjang yang selaras dengan minat akademik",
          "Membantu guru BK dan orang tua dalam memberikan dukungan pembelajaran yang tepat",
          "Mengurangi risiko salah jurusan yang dapat menyebabkan demotivasi dan drop out",
          "Meningkatkan performa akademis dengan belajar di bidang yang menarik bagi Anda",
          "Memberikan insight untuk pengembangan skill dan kompetensi yang relevan",
          "Membantu dalam persiapan ujian masuk perguruan tinggi dengan fokus yang jelas"
        ]
      }
    };
    
    // Test Data - 50 questions each based on valid theories
    const testData = {
      gayaBelajar: {
        title: "Tes Gaya Belajar",
        description: "Berdasarkan teori VAK (Visual, Auditory, Kinesthetic) oleh Neil Fleming",
        questions: [
          { q: "Saat belajar, saya lebih suka membaca buku atau melihat diagram", category: "Visual" },
          { q: "Saya lebih mudah mengingat sesuatu jika saya mendengarkannya", category: "Auditori" },
          { q: "Saya suka belajar sambil bergerak atau melakukan praktik langsung", category: "Kinestetik" },
          { q: "Saya lebih suka penjelasan yang disertai gambar atau grafik", category: "Visual" },
          { q: "Saya mudah mengingat lagu atau irama", category: "Auditori" },
          { q: "Saya suka menggunakan model atau alat peraga saat belajar", category: "Kinestetik" },
          { q: "Saya lebih suka membuat catatan dengan warna-warna berbeda", category: "Visual" },
          { q: "Saya lebih mudah belajar melalui diskusi kelompok", category: "Auditori" },
          { q: "Saya suka mencoba hal baru dengan tangan saya sendiri", category: "Kinestetik" },
          { q: "Saya lebih mudah mengingat wajah daripada nama", category: "Visual" },
          { q: "Saya suka mendengarkan podcast atau audio book", category: "Auditori" },
          { q: "Saya suka olahraga dan aktivitas fisik", category: "Kinestetik" },
          { q: "Saya lebih suka video tutorial daripada manual tertulis", category: "Visual" },
          { q: "Saya suka membaca dengan suara keras", category: "Auditori" },
          { q: "Saya suka menulis untuk memahami konsep", category: "Kinestetik" },
          { q: "Saya mudah mengikuti peta atau diagram", category: "Visual" },
          { q: "Saya suka musik saat belajar", category: "Auditori" },
          { q: "Saya suka membuat proyek atau eksperimen", category: "Kinestetik" },
          { q: "Saya lebih suka presentasi visual daripada ceramah", category: "Visual" },
          { q: "Saya mudah mengikuti instruksi lisan", category: "Auditori" },
          { q: "Saya suka belajar melalui permainan dan simulasi", category: "Kinestetik" },
          { q: "Saya suka menggunakan highlighter saat membaca", category: "Visual" },
          { q: "Saya lebih suka menjelaskan sesuatu secara verbal", category: "Auditori" },
          { q: "Saya suka menggunakan gesture saat berbicara", category: "Kinestetik" },
          { q: "Saya lebih suka flowchart daripada daftar tertulis", category: "Visual" },
          { q: "Saya suka merekam kuliah untuk didengarkan lagi", category: "Auditori" },
          { q: "Saya suka melakukan role-play saat belajar", category: "Kinestetik" },
          { q: "Saya mudah mengingat informasi dari infografis", category: "Visual" },
          { q: "Saya suka berdiskusi tentang topik yang dipelajari", category: "Auditori" },
          { q: "Saya suka belajar dengan melakukan praktikum", category: "Kinestetik" },
          { q: "Saya suka membuat mind map atau peta konsep", category: "Visual" },
          { q: "Saya lebih suka presentasi oral daripada tertulis", category: "Auditori" },
          { q: "Saya suka field trip dan kunjungan lapangan", category: "Kinestetik" },
          { q: "Saya mudah memahami chart dan tabel", category: "Visual" },
          { q: "Saya suka mendengar penjelasan berulang kali", category: "Auditori" },
          { q: "Saya suka membuat model 3D atau prototype", category: "Kinestetik" },
          { q: "Saya lebih suka film dokumenter daripada buku", category: "Visual" },
          { q: "Saya mudah terpengaruh nada bicara orang", category: "Auditori" },
          { q: "Saya suka mengetik daripada menulis tangan", category: "Kinestetik" },
          { q: "Saya suka melihat demonstrasi sebelum mencoba", category: "Visual" },
          { q: "Saya suka berbicara pada diri sendiri saat belajar", category: "Auditori" },
          { q: "Saya suka membongkar dan merakit kembali barang", category: "Kinestetik" },
          { q: "Saya lebih suka komik daripada novel", category: "Visual" },
          { q: "Saya mudah terganggu oleh suara bising", category: "Auditori" },
          { q: "Saya suka belajar sambil berjalan-jalan", category: "Kinestetik" },
          { q: "Saya suka mengatur ruang belajar dengan rapi dan menarik", category: "Visual" },
          { q: "Saya suka mendengarkan ceramah atau seminar", category: "Auditori" },
          { q: "Saya suka menggunakan alat bantu saat belajar", category: "Kinestetik" },
          { q: "Saya lebih suka tutorial bergambar", category: "Visual" },
          { q: "Saya suka brainstorming dengan suara keras", category: "Auditori" }
        ]
      },
      kemampuan: {
        title: "Tes Kemampuan",
        description: "Berdasarkan teori Multiple Intelligences oleh Howard Gardner",
        questions: [
          { q: "Saya pandai dalam menyelesaikan masalah matematika", category: "Logis-Matematis" },
          { q: "Saya mudah memahami dan menggunakan bahasa", category: "Linguistik" },
          { q: "Saya memiliki koordinasi tubuh yang baik", category: "Kinestetik" },
          { q: "Saya dapat membayangkan bentuk 3D dengan mudah", category: "Visual-Spasial" },
          { q: "Saya mudah mengingat melodi dan nada", category: "Musikal" },
          { q: "Saya pandai memahami perasaan orang lain", category: "Interpersonal" },
          { q: "Saya memahami diri saya dengan baik", category: "Intrapersonal" },
          { q: "Saya tertarik pada fenomena alam dan lingkungan", category: "Naturalis" },
          { q: "Saya suka menganalisis pola dan hubungan antar data", category: "Logis-Matematis" },
          { q: "Saya pandai menulis cerita atau esai", category: "Linguistik" },
          { q: "Saya suka menari atau berolahraga", category: "Kinestetik" },
          { q: "Saya pandai menggambar atau melukis", category: "Visual-Spasial" },
          { q: "Saya bisa memainkan alat musik", category: "Musikal" },
          { q: "Saya mudah bergaul dan membuat teman", category: "Interpersonal" },
          { q: "Saya suka merefleksikan pengalaman saya", category: "Intrapersonal" },
          { q: "Saya suka mengamati hewan dan tumbuhan", category: "Naturalis" },
          { q: "Saya pandai dalam permainan strategi", category: "Logis-Matematis" },
          { q: "Saya memiliki kosakata yang luas", category: "Linguistik" },
          { q: "Saya mahir dalam kerajinan tangan", category: "Kinestetik" },
          { q: "Saya mudah membaca peta dan navigasi", category: "Visual-Spasial" },
          { q: "Saya peka terhadap ritme dan beat", category: "Musikal" },
          { q: "Saya pandai memimpin kelompok", category: "Interpersonal" },
          { q: "Saya tahu kekuatan dan kelemahan saya", category: "Intrapersonal" },
          { q: "Saya peduli pada isu lingkungan", category: "Naturalis" },
          { q: "Saya suka eksperimen dan penelitian", category: "Logis-Matematis" },
          { q: "Saya pandai dalam debat dan argumentasi", category: "Linguistik" },
          { q: "Saya suka aktivitas outdoor yang menantang", category: "Kinestetik" },
          { q: "Saya bisa mendesain layout yang menarik", category: "Visual-Spasial" },
          { q: "Saya dapat membuat komposisi musik", category: "Musikal" },
          { q: "Saya pandai menyelesaikan konflik", category: "Interpersonal" },
          { q: "Saya suka menetapkan tujuan pribadi", category: "Intrapersonal" },
          { q: "Saya tertarik pada astronomi dan geologi", category: "Naturalis" },
          { q: "Saya pandai menggunakan logika deduktif", category: "Logis-Matematis" },
          { q: "Saya suka bermain dengan kata-kata (pun, pantun)", category: "Linguistik" },
          { q: "Saya memiliki refleks yang cepat", category: "Kinestetik" },
          { q: "Saya mudah mengingat lokasi dan arah", category: "Visual-Spasial" },
          { q: "Saya dapat mengenali nada yang sumbang", category: "Musikal" },
          { q: "Saya pandai membaca bahasa tubuh", category: "Interpersonal" },
          { q: "Saya suka bekerja secara mandiri", category: "Intrapersonal" },
          { q: "Saya suka berkebun atau merawat hewan", category: "Naturalis" },
          { q: "Saya pandai mengelola keuangan", category: "Logis-Matematis" },
          { q: "Saya suka belajar bahasa asing", category: "Linguistik" },
          { q: "Saya pandai menggunakan alat dan peralatan", category: "Kinestetik" },
          { q: "Saya memiliki sense of style yang baik", category: "Visual-Spasial" },
          { q: "Saya mudah menghafal lirik lagu", category: "Musikal" },
          { q: "Saya pandai bernegosiasi", category: "Interpersonal" },
          { q: "Saya suka menulis jurnal pribadi", category: "Intrapersonal" },
          { q: "Saya tertarik pada ekosistem dan biodiversitas", category: "Naturalis" },
          { q: "Saya pandai dalam coding atau programming", category: "Logis-Matematis" },
          { q: "Saya suka bercerita dan public speaking", category: "Linguistik" }
        ]
      },
      kepribadian: {
        title: "Tes Kepribadian",
        description: "Berdasarkan teori Big Five Personality (OCEAN)",
        questions: [
          { q: "Saya senang mencoba hal-hal baru", category: "Openness" },
          { q: "Saya adalah orang yang terorganisir", category: "Conscientiousness" },
          { q: "Saya senang berkumpul dengan orang banyak", category: "Extraversion" },
          { q: "Saya mudah bersimpati pada orang lain", category: "Agreeableness" },
          { q: "Saya sering merasa khawatir", category: "Neuroticism" },
          { q: "Saya memiliki imajinasi yang kaya", category: "Openness" },
          { q: "Saya selalu menyelesaikan tugas tepat waktu", category: "Conscientiousness" },
          { q: "Saya mudah memulai percakapan", category: "Extraversion" },
          { q: "Saya peduli pada perasaan orang lain", category: "Agreeableness" },
          { q: "Saya mudah stres", category: "Neuroticism" },
          { q: "Saya tertarik pada seni dan budaya", category: "Openness" },
          { q: "Saya membuat rencana dan mengikutinya", category: "Conscientiousness" },
          { q: "Saya adalah pusat perhatian di pesta", category: "Extraversion" },
          { q: "Saya suka membantu orang lain", category: "Agreeableness" },
          { q: "Saya sering merasa sedih", category: "Neuroticism" },
          { q: "Saya suka berpikir tentang ide-ide abstrak", category: "Openness" },
          { q: "Saya memperhatikan detail kecil", category: "Conscientiousness" },
          { q: "Saya merasa nyaman di sekitar orang", category: "Extraversion" },
          { q: "Saya mudah memaafkan", category: "Agreeableness" },
          { q: "Saya mudah tersinggung", category: "Neuroticism" },
          { q: "Saya terbuka pada pengalaman baru", category: "Openness" },
          { q: "Saya bekerja dengan sistematis", category: "Conscientiousness" },
          { q: "Saya suka berbicara dengan orang asing", category: "Extraversion" },
          { q: "Saya menghargai pendapat orang lain", category: "Agreeableness" },
          { q: "Saya sering merasa cemas", category: "Neuroticism" },
          { q: "Saya suka mengeksplorasi ide filosofis", category: "Openness" },
          { q: "Saya dapat diandalkan", category: "Conscientiousness" },
          { q: "Saya energik dan aktif", category: "Extraversion" },
          { q: "Saya ramah dan hangat", category: "Agreeableness" },
          { q: "Saya mudah panik", category: "Neuroticism" },
          { q: "Saya tertarik pada budaya lain", category: "Openness" },
          { q: "Saya disiplin dalam pekerjaan", category: "Conscientiousness" },
          { q: "Saya suka petualangan sosial", category: "Extraversion" },
          { q: "Saya toleran terhadap perbedaan", category: "Agreeableness" },
          { q: "Saya sering merasa tidak aman", category: "Neuroticism" },
          { q: "Saya kreatif dan inovatif", category: "Openness" },
          { q: "Saya bertanggung jawab", category: "Conscientiousness" },
          { q: "Saya senang menjadi pemimpin", category: "Extraversion" },
          { q: "Saya kooperatif dalam tim", category: "Agreeableness" },
          { q: "Saya mudah mood swing", category: "Neuroticism" },
          { q: "Saya memiliki selera artistik", category: "Openness" },
          { q: "Saya efisien dalam bekerja", category: "Conscientiousness" },
          { q: "Saya menikmati interaksi sosial", category: "Extraversion" },
          { q: "Saya percaya pada orang lain", category: "Agreeableness" },
          { q: "Saya sensitif terhadap kritik", category: "Neuroticism" },
          { q: "Saya penasaran tentang banyak hal", category: "Openness" },
          { q: "Saya perfeksionis", category: "Conscientiousness" },
          { q: "Saya assertif dan tegas", category: "Extraversion" },
          { q: "Saya rendah hati", category: "Agreeableness" },
          { q: "Saya sering overthinking", category: "Neuroticism" }
        ]
      },
      minatMapel: {
        title: "Tes Minat Mata Pelajaran",
        description: "Berdasarkan teori Holland's RIASEC dan Interest Inventory",
        questions: [
          { q: "Saya tertarik mempelajari angka dan rumus", category: "Matematika" },
          { q: "Saya suka membaca karya sastra", category: "Bahasa" },
          { q: "Saya tertarik pada eksperimen dan penelitian", category: "IPA" },
          { q: "Saya suka mempelajari sejarah peradaban", category: "IPS" },
          { q: "Saya senang beraktivitas fisik dan olahraga", category: "Olahraga" },
          { q: "Saya tertarik pada seni rupa dan kerajinan", category: "Seni" },
          { q: "Saya suka memecahkan soal logika", category: "Matematika" },
          { q: "Saya pandai dalam tata bahasa", category: "Bahasa" },
          { q: "Saya tertarik pada fenomena alam", category: "IPA" },
          { q: "Saya suka mempelajari ekonomi dan bisnis", category: "IPS" },
          { q: "Saya tertarik pada permainan strategi tim", category: "Olahraga" },
          { q: "Saya suka menggambar dan melukis", category: "Seni" },
          { q: "Saya pandai dalam geometri dan aljabar", category: "Matematika" },
          { q: "Saya suka menulis cerita atau puisi", category: "Bahasa" },
          { q: "Saya tertarik pada biologi dan anatomi", category: "IPA" },
          { q: "Saya suka mempelajari geografi", category: "IPS" },
          { q: "Saya menikmati latihan fisik yang intens", category: "Olahraga" },
          { q: "Saya tertarik pada musik dan vokal", category: "Seni" },
          { q: "Saya suka statistika dan probabilitas", category: "Matematika" },
          { q: "Saya pandai dalam public speaking", category: "Bahasa" },
          { q: "Saya tertarik pada kimia dan reaksi zat", category: "IPA" },
          { q: "Saya suka mempelajari sosiologi", category: "IPS" },
          { q: "Saya tertarik pada ilmu kesehatan dan nutrisi", category: "Olahraga" },
          { q: "Saya suka desain dan komposisi visual", category: "Seni" },
          { q: "Saya pandai dalam kalkulus", category: "Matematika" },
          { q: "Saya suka berdebat dan berargumentasi", category: "Bahasa" },
          { q: "Saya tertarik pada fisika dan mekanika", category: "IPA" },
          { q: "Saya suka mempelajari politik", category: "IPS" },
          { q: "Saya menikmati kompetisi atletik", category: "Olahraga" },
          { q: "Saya tertarik pada seni pertunjukan", category: "Seni" },
          { q: "Saya suka pemodelan matematika", category: "Matematika" },
          { q: "Saya pandai dalam analisis teks", category: "Bahasa" },
          { q: "Saya tertarik pada astronomi", category: "IPA" },
          { q: "Saya suka mempelajari antropologi", category: "IPS" },
          { q: "Saya tertarik pada yoga dan meditasi", category: "Olahraga" },
          { q: "Saya suka fotografi dan videografi", category: "Seni" },
          { q: "Saya pandai dalam kombinatorika", category: "Matematika" },
          { q: "Saya suka mempelajari linguistik", category: "Bahasa" },
          { q: "Saya tertarik pada ekologi", category: "IPA" },
          { q: "Saya suka mempelajari hukum", category: "IPS" },
          { q: "Saya menikmati dance dan koreografi", category: "Olahraga" },
          { q: "Saya tertarik pada animasi dan digital art", category: "Seni" },
          { q: "Saya suka teori bilangan", category: "Matematika" },
          { q: "Saya pandai dalam retorika", category: "Bahasa" },
          { q: "Saya tertarik pada genetika", category: "IPA" },
          { q: "Saya suka mempelajari psikologi sosial", category: "IPS" },
          { q: "Saya tertarik pada martial arts", category: "Olahraga" },
          { q: "Saya suka keramik dan patung", category: "Seni" },
          { q: "Saya pandai dalam analisis data", category: "Matematika" },
          { q: "Saya suka kritik sastra", category: "Bahasa" }
        ]
      }
    };

    // Display current date and year
    function updateDateTime() {
      const now = new Date();
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      document.getElementById('currentDate').textContent = now.toLocaleDateString('id-ID', options);
      document.getElementById('currentYear').textContent = `¬© ${now.getFullYear()}`;
    }

    // Load saved biodata from localStorage
    function loadBiodata() {
      const savedData = localStorage.getItem('mappaguru_biodata');
      if (savedData) {
        const biodata = JSON.parse(savedData);
        document.getElementById('nama').value = biodata.nama || '';
        document.getElementById('umur').value = biodata.umur || '';
        if (biodata.jenisKelamin) {
          const radio = document.querySelector(`input[name="jenisKelamin"][value="${biodata.jenisKelamin}"]`);
          if (radio) radio.checked = true;
        }
      }
    }

    // Handle form submission
    document.getElementById('biodataForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const formData = {
        nama: document.getElementById('nama').value,
        umur: document.getElementById('umur').value,
        jenisKelamin: document.querySelector('input[name="jenisKelamin"]:checked').value,
        timestamp: new Date().toISOString()
      };
      
      localStorage.setItem('mappaguru_biodata', JSON.stringify(formData));
      
      showTestMenu();
    });

    function showTestMenu() {
      const biodata = JSON.parse(localStorage.getItem('mappaguru_biodata'));
      document.getElementById('welcomeName').textContent = biodata.nama;
      
      document.getElementById('biodataSection').classList.add('hidden');
      document.getElementById('testMenuSection').classList.remove('hidden');
    }
    
    function editBiodata() {
      document.getElementById('testMenuSection').classList.add('hidden');
      document.getElementById('biodataSection').classList.remove('hidden');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function startTest(testType) {
      currentTest = testType;
      
      // Show instructions first
      const instructions = testInstructions[testType];
      
      document.getElementById('instructionTitle').textContent = instructions.title;
      document.getElementById('instructionTheory').textContent = instructions.theory;
      document.getElementById('instructionDefinition').textContent = instructions.definition;
      document.getElementById('instructionPurpose').textContent = instructions.purpose;
      
      const benefitsList = document.getElementById('instructionBenefits');
      benefitsList.innerHTML = '';
      instructions.benefits.forEach(benefit => {
        benefitsList.innerHTML += `
          <li class="flex items-start">
            <svg class="w-5 h-5 mr-2 text-purple-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
            </svg>
            <span>${benefit}</span>
          </li>
        `;
      });
      
      document.getElementById('instructionIcon').className = `inline-block ${instructions.icon} text-white rounded-full p-4 mb-4`;
      
      document.getElementById('testMenuSection').classList.add('hidden');
      document.getElementById('testInstructionsSection').classList.remove('hidden');
    }
    
    function startTestFromInstructions() {
      currentQuestionIndex = 0;
      
      const savedAnswers = localStorage.getItem(`mappaguru_${currentTest}`);
      if (savedAnswers) {
        answers = JSON.parse(savedAnswers);
      } else {
        answers = {};
      }
      
      document.getElementById('testInstructionsSection').classList.add('hidden');
      document.getElementById('testSection').classList.remove('hidden');
      
      document.getElementById('testTitle').textContent = testData[currentTest].title;
      
      displayQuestion();
    }
    
    function backToMenuFromInstructions() {
      document.getElementById('testInstructionsSection').classList.add('hidden');
      document.getElementById('testMenuSection').classList.remove('hidden');
    }

    function displayQuestion() {
      const test = testData[currentTest];
      const question = test.questions[currentQuestionIndex];
      
      document.getElementById('questionCounter').textContent = `${currentQuestionIndex + 1} / ${test.questions.length}`;
      document.getElementById('questionText').textContent = question.q;
      
      const progress = ((currentQuestionIndex + 1) / test.questions.length) * 100;
      document.getElementById('progressBar').style.width = `${progress}%`;
      
      const optionsContainer = document.getElementById('optionsContainer');
      optionsContainer.innerHTML = '';
      
      const options = [
        { value: 5, label: 'Sangat Setuju' },
        { value: 4, label: 'Setuju' },
        { value: 3, label: 'Netral' },
        { value: 2, label: 'Tidak Setuju' },
        { value: 1, label: 'Sangat Tidak Setuju' }
      ];
      
      options.forEach(option => {
        const isChecked = answers[currentQuestionIndex] === option.value ? 'checked' : '';
        optionsContainer.innerHTML += `
          <div>
            <input type="radio" id="opt${option.value}" name="answer" value="${option.value}" class="radio-custom hidden peer" ${isChecked}>
            <label for="opt${option.value}" class="block cursor-pointer border-2 border-gray-300 rounded-lg p-3 sm:p-4 peer-checked:border-purple-500 peer-checked:bg-gradient-to-r peer-checked:from-purple-500 peer-checked:to-indigo-600 peer-checked:text-white transition-all hover:border-purple-300">
              <span class="text-sm sm:text-base font-semibold">${option.label}</span>
            </label>
          </div>
        `;
      });
      
      document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
      document.getElementById('prevBtn').style.opacity = currentQuestionIndex === 0 ? '0.5' : '1';
      
      const isLastQuestion = currentQuestionIndex === test.questions.length - 1;
      document.getElementById('nextBtn').textContent = isLastQuestion ? 'Selesai ‚úì' : 'Selanjutnya ‚Üí';
    }

    function nextQuestion() {
      const selectedAnswer = document.querySelector('input[name="answer"]:checked');
      if (!selectedAnswer) {
        showToast('Silakan pilih jawaban terlebih dahulu');
        return;
      }
      
      answers[currentQuestionIndex] = parseInt(selectedAnswer.value);
      localStorage.setItem(`mappaguru_${currentTest}`, JSON.stringify(answers));
      
      const test = testData[currentTest];
      
      if (currentQuestionIndex < test.questions.length - 1) {
        currentQuestionIndex++;
        displayQuestion();
      } else {
        finishTest();
      }
    }

    function previousQuestion() {
      if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
        displayQuestion();
      }
    }

    function finishTest() {
      showToast('Tes berhasil diselesaikan!');
      setTimeout(() => {
        document.getElementById('testSection').classList.add('hidden');
        document.getElementById('testMenuSection').classList.remove('hidden');
      }, 1500);
    }

    function viewResults() {
      const resultsContainer = document.getElementById('resultsContainer');
      resultsContainer.innerHTML = '';
      
      const tests = ['gayaBelajar', 'kemampuan', 'kepribadian', 'minatMapel'];
      
      tests.forEach(testType => {
        const savedAnswers = localStorage.getItem(`mappaguru_${testType}`);
        if (savedAnswers) {
          const result = calculateResult(testType, JSON.parse(savedAnswers));
          resultsContainer.innerHTML += createResultCard(testType, result);
        }
      });
      
      document.getElementById('testMenuSection').classList.add('hidden');
      document.getElementById('resultsSection').classList.remove('hidden');
      
      setTimeout(() => {
        tests.forEach(testType => {
          const savedAnswers = localStorage.getItem(`mappaguru_${testType}`);
          if (savedAnswers) {
            const result = calculateResult(testType, JSON.parse(savedAnswers));
            createChart(testType, result);
          }
        });
      }, 100);
    }

    function calculateResult(testType, answers) {
      const test = testData[testType];
      const categories = {};
      
      Object.keys(answers).forEach(index => {
        const question = test.questions[parseInt(index)];
        const category = question.category;
        
        if (!categories[category]) {
          categories[category] = { total: 0, count: 0 };
        }
        
        categories[category].total += answers[index];
        categories[category].count++;
      });
      
      const result = {};
      Object.keys(categories).forEach(category => {
        result[category] = (categories[category].total / categories[category].count).toFixed(2);
      });
      
      return result;
    }

    function createResultCard(testType, result) {
      const test = testData[testType];
      const sortedResult = Object.entries(result).sort((a, b) => b[1] - a[1]);
      const topCategory = sortedResult[0];
      const recommendations = getRecommendations(testType, topCategory[0]);
      const followUp = getFollowUp(testType, topCategory[0]);
      
      const colors = {
        gayaBelajar: 'blue',
        kemampuan: 'green',
        kepribadian: 'purple',
        minatMapel: 'orange'
      };
      
      const color = colors[testType];
      
      return `
        <div id="result-${testType}" class="border-2 border-${color}-200 rounded-xl p-6 bg-gradient-to-br from-${color}-50 to-${color}-100">
          <div class="flex justify-between items-start mb-4">
            <div>
              <h3 class="text-2xl font-bold text-gray-800 mb-2">${test.title}</h3>
              <p class="text-gray-600 text-sm">${test.description}</p>
            </div>
            <button onclick="downloadSinglePDF('${testType}')" class="bg-white text-${color}-600 font-semibold py-2 px-4 rounded-lg hover:bg-${color}-100 transition-all flex items-center gap-2 text-sm">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
              </svg>
              PDF
            </button>
          </div>
          
          <div class="bg-white rounded-lg p-4 mb-4">
            <h4 class="font-bold text-lg text-${color}-600 mb-2">üèÜ Hasil Dominan:</h4>
            <div class="flex items-center justify-between">
              <span class="text-xl font-bold text-gray-800">${topCategory[0]}</span>
              <span class="text-2xl font-bold text-${color}-600">${topCategory[1]}/5.0</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-3 mt-2">
              <div class="bg-gradient-to-r from-${color}-500 to-${color}-600 h-3 rounded-full" style="width: ${(topCategory[1] / 5) * 100}%"></div>
            </div>
          </div>
          
          <div class="grid md:grid-cols-2 gap-4 mb-4">
            <div class="bg-white rounded-lg p-4">
              <h4 class="font-bold text-gray-700 mb-3 flex items-center gap-2">
                <svg class="w-5 h-5 text-${color}-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                </svg>
                Detail Semua Hasil
              </h4>
              <div class="space-y-2">
                ${sortedResult.map((item, index) => `
                  <div class="flex justify-between items-center">
                    <span class="text-sm text-gray-700">${index + 1}. ${item[0]}</span>
                    <span class="font-bold text-${color}-600">${item[1]}</span>
                  </div>
                  <div class="w-full bg-gray-200 rounded-full h-2">
                    <div class="bg-${color}-500 h-2 rounded-full" style="width: ${(item[1] / 5) * 100}%"></div>
                  </div>
                `).join('')}
              </div>
            </div>
            
            <div class="bg-white rounded-lg p-4">
              <h4 class="font-bold text-gray-700 mb-3">üìä Visualisasi Radar:</h4>
              <canvas id="chart-${testType}" class="w-full" style="max-height: 250px;"></canvas>
            </div>
          </div>
          
          <div class="bg-white rounded-lg p-4 mb-4">
            <h4 class="font-bold text-gray-700 mb-2 flex items-center gap-2">
              <svg class="w-5 h-5 text-${color}-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              Interpretasi Hasil
            </h4>
            <p class="text-gray-700 leading-relaxed">${getInterpretation(testType, topCategory[0])}</p>
          </div>
          
          <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4 mb-4 border border-blue-200">
            <h4 class="font-bold text-gray-800 mb-3 flex items-center gap-2">
              <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
              </svg>
              Rekomendasi
            </h4>
            <ul class="space-y-2">
              ${recommendations.map(rec => `
                <li class="flex items-start gap-2">
                  <svg class="w-5 h-5 text-green-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                  </svg>
                  <span class="text-gray-700 text-sm">${rec}</span>
                </li>
              `).join('')}
            </ul>
          </div>
          
          <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-200">
            <h4 class="font-bold text-gray-800 mb-3 flex items-center gap-2">
              <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
              </svg>
              Rencana Tindak Lanjut
            </h4>
            <ul class="space-y-2">
              ${followUp.map(action => `
                <li class="flex items-start gap-2">
                  <svg class="w-5 h-5 text-purple-600 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                  </svg>
                  <span class="text-gray-700 text-sm">${action}</span>
                </li>
              `).join('')}
            </ul>
          </div>
        </div>
      `;
    }

    function createChart(testType, result) {
      const ctx = document.getElementById(`chart-${testType}`);
      if (!ctx) return;
      
      const labels = Object.keys(result);
      const data = Object.values(result);
      
      const colors = {
        gayaBelajar: { bg: 'rgba(59, 130, 246, 0.2)', border: 'rgb(59, 130, 246)' },
        kemampuan: { bg: 'rgba(34, 197, 94, 0.2)', border: 'rgb(34, 197, 94)' },
        kepribadian: { bg: 'rgba(168, 85, 247, 0.2)', border: 'rgb(168, 85, 247)' },
        minatMapel: { bg: 'rgba(249, 115, 22, 0.2)', border: 'rgb(249, 115, 22)' }
      };
      
      new Chart(ctx, {
        type: 'radar',
        data: {
          labels: labels,
          datasets: [{
            label: 'Skor',
            data: data,
            backgroundColor: colors[testType].bg,
            borderColor: colors[testType].border,
            borderWidth: 2,
            pointBackgroundColor: colors[testType].border,
            pointBorderColor: '#fff',
            pointHoverBackgroundColor: '#fff',
            pointHoverBorderColor: colors[testType].border,
            pointRadius: 4,
            pointHoverRadius: 6
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          scales: {
            r: {
              beginAtZero: true,
              max: 5,
              ticks: {
                stepSize: 1
              }
            }
          },
          plugins: {
            legend: {
              display: false
            }
          }
        }
      });
    }

    function getInterpretation(testType, category) {
      const interpretations = {
        gayaBelajar: {
          'Visual': 'Anda belajar paling baik melalui gambar, diagram, dan visualisasi. Gunakan mind map, highlighter, dan video pembelajaran.',
          'Auditori': 'Anda belajar paling baik melalui mendengar. Gunakan podcast, diskusi kelompok, dan baca dengan suara keras.',
          'Kinestetik': 'Anda belajar paling baik melalui praktik langsung. Lakukan eksperimen, role-play, dan pembelajaran berbasis proyek.'
        },
        kemampuan: {
          'Logis-Matematis': 'Anda unggul dalam berpikir analitis dan pemecahan masalah. Cocok untuk STEM, programming, dan analisis data.',
          'Linguistik': 'Anda memiliki kemampuan bahasa yang kuat. Cocok untuk jurnalisme, sastra, hukum, dan komunikasi.',
          'Kinestetik': 'Anda memiliki koordinasi fisik yang baik. Cocok untuk olahraga, tari, bedah, dan kerajinan.',
          'Visual-Spasial': 'Anda pandai memvisualisasikan ruang. Cocok untuk arsitektur, desain, navigasi, dan seni.',
          'Musikal': 'Anda memiliki kepekaan musikal. Cocok untuk musik, sound engineering, dan terapi musik.',
          'Interpersonal': 'Anda pandai memahami orang lain. Cocok untuk konseling, mengajar, sales, dan HR.',
          'Intrapersonal': 'Anda memahami diri dengan baik. Cocok untuk penelitian, writing, dan entrepreneurship.',
          'Naturalis': 'Anda memiliki kepekaan terhadap alam. Cocok untuk biologi, konservasi, dan pertanian.'
        },
        kepribadian: {
          'Openness': 'Anda terbuka pada pengalaman baru, kreatif, dan penasaran. Anda cocok untuk pekerjaan yang membutuhkan inovasi.',
          'Conscientiousness': 'Anda terorganisir, bertanggung jawab, dan disiplin. Anda cocok untuk pekerjaan yang membutuhkan ketelitian.',
          'Extraversion': 'Anda energik, sosial, dan assertif. Anda cocok untuk pekerjaan yang melibatkan interaksi dengan banyak orang.',
          'Agreeableness': 'Anda kooperatif, empatik, dan ramah. Anda cocok untuk pekerjaan yang membutuhkan kerja tim.',
          'Neuroticism': 'Anda sensitif secara emosional. Penting untuk mengembangkan strategi manajemen stres.'
        },
        minatMapel: {
          'Matematika': 'Anda memiliki minat tinggi pada matematika. Pertimbangkan karir di bidang engineering, akuntansi, atau data science.',
          'Bahasa': 'Anda memiliki minat tinggi pada bahasa. Pertimbangkan karir di bidang sastra, linguistik, atau penerjemahan.',
          'IPA': 'Anda memiliki minat tinggi pada sains. Pertimbangkan karir di bidang penelitian, kedokteran, atau teknologi.',
          'IPS': 'Anda memiliki minat tinggi pada ilmu sosial. Pertimbangkan karir di bidang hukum, politik, atau bisnis.',
          'Olahraga': 'Anda memiliki minat tinggi pada aktivitas fisik. Pertimbangkan karir di bidang atlet, fisioterapi, atau pelatih.',
          'Seni': 'Anda memiliki minat tinggi pada seni. Pertimbangkan karir di bidang desain, musik, atau entertainment.'
        }
      };
      
      return interpretations[testType][category] || 'Hasil menunjukkan karakteristik unik Anda.';
    }
    
    function getRecommendations(testType, category) {
      const recommendations = {
        gayaBelajar: {
          'Visual': [
            'Gunakan diagram, flowchart, dan mind mapping untuk memvisualisasikan konsep',
            'Tandai materi penting dengan highlighter berwarna-warni',
            'Tonton video pembelajaran dan tutorial visual',
            'Buat catatan dengan menggunakan gambar dan simbol',
            'Gunakan flashcard dengan ilustrasi untuk menghafal'
          ],
          'Auditori': [
            'Rekam penjelasan guru/dosen dan dengarkan berulang kali',
            'Bergabung dengan kelompok diskusi dan belajar bersama',
            'Gunakan musik klasik sebagai background saat belajar',
            'Baca materi dengan suara keras untuk meningkatkan pemahaman',
            'Dengarkan podcast edukatif dan audiobook'
          ],
          'Kinestetik': [
            'Lakukan eksperimen dan praktikum langsung',
            'Belajar sambil berjalan atau bergerak ringan',
            'Gunakan model 3D dan alat peraga fisik',
            'Ikuti workshop dan pelatihan hands-on',
            'Buat proyek praktis untuk menerapkan teori'
          ]
        },
        kemampuan: {
          'Logis-Matematis': [
            'Ikuti kursus programming dan data science',
            'Latih kemampuan problem solving dengan puzzle dan games logika',
            'Pelajari matematika tingkat lanjut dan statistika',
            'Ikuti kompetisi olimpiade matematika atau coding',
            'Kembangkan skill analytical thinking melalui case studies'
          ],
          'Linguistik': [
            'Perbanyak membaca buku, artikel, dan literatur berkualitas',
            'Latih kemampuan menulis dengan membuat blog atau jurnal',
            'Ikuti kursus public speaking dan debat',
            'Pelajari bahasa asing untuk memperluas wawasan linguistik',
            'Bergabung dengan komunitas sastra atau kepenulisan'
          ],
          'Kinestetik': [
            'Ikuti latihan fisik dan olahraga secara teratur',
            'Pelajari tari, martial arts, atau yoga',
            'Kembangkan skill manual seperti woodworking atau crafting',
            'Ikuti pelatihan vocational yang melibatkan praktik langsung',
            'Pertimbangkan karir di bidang kesehatan, olahraga, atau seni pertunjukan'
          ],
          'Visual-Spasial': [
            'Pelajari software desain grafis dan 3D modeling',
            'Kembangkan skill fotografi dan videografi',
            'Latih kemampuan menggambar dan melukis',
            'Ikuti kursus arsitektur atau interior design',
            'Main games yang melatih spatial reasoning'
          ],
          'Musikal': [
            'Pelajari alat musik atau vokal secara intensif',
            'Ikuti kursus teori musik dan komposisi',
            'Bergabung dengan band, paduan suara, atau orkestra',
            'Pelajari music production dan audio engineering',
            'Latih pendengaran musikal dengan ear training'
          ],
          'Interpersonal': [
            'Ikuti pelatihan leadership dan team building',
            'Kembangkan emotional intelligence melalui workshop',
            'Bergabung dengan organisasi sosial atau volunteer',
            'Latih kemampuan networking dan komunikasi',
            'Pertimbangkan karir di bidang pendidikan, konseling, atau HR'
          ],
          'Intrapersonal': [
            'Lakukan refleksi diri secara rutin melalui journaling',
            'Ikuti pelatihan mindfulness dan meditasi',
            'Tetapkan tujuan personal dan evaluasi secara berkala',
            'Kembangkan self-discipline melalui habit building',
            'Pelajari filosofi dan psikologi untuk pemahaman diri yang lebih dalam'
          ],
          'Naturalis': [
            'Ikuti kegiatan outdoor dan eksplorasi alam',
            'Pelajari botani, zoologi, atau ekologi',
            'Bergabung dengan komunitas pecinta alam atau konservasi',
            'Mulai berkebun atau merawat hewan peliharaan',
            'Pertimbangkan karir di bidang environmental science atau pertanian'
          ]
        },
        kepribadian: {
          'Openness': [
            'Eksplorasi hobi dan minat baru secara teratur',
            'Bepergian ke tempat-tempat baru untuk memperluas perspektif',
            'Baca buku dari berbagai genre dan disiplin ilmu',
            'Ikuti workshop kreatif dan seni',
            'Bergabung dengan komunitas inovatif dan startup'
          ],
          'Conscientiousness': [
            'Gunakan planner dan to-do list untuk mengatur tugas',
            'Tetapkan deadline yang realistis dan patuhi komitmen',
            'Kembangkan sistem organisasi yang efisien',
            'Latih attention to detail melalui quality assurance tasks',
            'Pertimbangkan karir yang membutuhkan presisi tinggi'
          ],
          'Extraversion': [
            'Ikuti kegiatan networking dan social events',
            'Bergabung dengan klub atau organisasi yang aktif',
            'Kembangkan skill public speaking dan presentasi',
            'Pertimbangkan karir di sales, marketing, atau event management',
            'Manfaatkan energi sosial untuk membangun relasi profesional'
          ],
          'Agreeableness': [
            'Kembangkan skill mediasi dan conflict resolution',
            'Ikuti pelatihan empathy dan active listening',
            'Bergabung dengan kegiatan sosial dan kemanusiaan',
            'Pertimbangkan karir di bidang counseling atau social work',
            'Latih assertiveness untuk menyeimbangkan keramahan'
          ],
          'Neuroticism': [
            'Pelajari teknik manajemen stres dan anxiety',
            'Latih mindfulness dan meditasi secara rutin',
            'Lakukan olahraga teratur untuk kesehatan mental',
            'Pertimbangkan konseling atau terapi jika diperlukan',
            'Kembangkan support system yang kuat'
          ]
        },
        minatMapel: {
          'Matematika': [
            'Ikuti olimpiade matematika dan kompetisi problem solving',
            'Pelajari aplikasi matematika dalam kehidupan nyata',
            'Kembangkan skill programming dengan Python atau R',
            'Pertimbangkan jurusan Engineering, Matematika, atau Aktuaria',
            'Eksplorasi bidang Data Science dan Machine Learning'
          ],
          'Bahasa': [
            'Pelajari bahasa asing dan budaya internasional',
            'Latih kemampuan menulis kreatif dan analisis teks',
            'Ikuti lomba debat dan pidato',
            'Pertimbangkan jurusan Sastra, Linguistik, atau Komunikasi',
            'Kembangkan karir di bidang jurnalisme atau content creation'
          ],
          'IPA': [
            'Lakukan eksperimen sains di rumah atau laboratorium',
            'Ikuti kompetisi sains dan penelitian ilmiah',
            'Pelajari metode ilmiah dan critical thinking',
            'Pertimbangkan jurusan Kedokteran, Biologi, atau Teknik',
            'Eksplorasi research dan development'
          ],
          'IPS': [
            'Pelajari isu-isu sosial dan ekonomi kontemporer',
            'Ikuti Model United Nations dan simulasi politik',
            'Kembangkan pemahaman tentang hukum dan governance',
            'Pertimbangkan jurusan Hukum, Ekonomi, atau Hubungan Internasional',
            'Eksplorasi karir di bidang public policy atau bisnis'
          ],
          'Olahraga': [
            'Latih kemampuan atletik secara konsisten',
            'Pelajari sports science dan nutrisi',
            'Ikuti kompetisi olahraga di level regional atau nasional',
            'Pertimbangkan jurusan Pendidikan Jasmani atau Fisioterapi',
            'Eksplorasi karir sebagai atlet, pelatih, atau sports analyst'
          ],
          'Seni': [
            'Kembangkan portfolio karya seni yang beragam',
            'Pelajari berbagai medium dan teknik artistik',
            'Ikuti pameran dan kompetisi seni',
            'Pertimbangkan jurusan Desain, Seni Rupa, atau Film',
            'Eksplorasi industri kreatif dan digital art'
          ]
        }
      };
      
      return recommendations[testType][category] || ['Kembangkan potensi Anda secara konsisten'];
    }
    
    function getFollowUp(testType, category) {
      const followUp = {
        gayaBelajar: {
          'Visual': [
            'Minggu ini: Buat mind map untuk mata pelajaran tersulit Anda',
            'Bulan ini: Download 3 aplikasi pembelajaran visual dan eksplorasi fiturnya',
            '3 Bulan ke depan: Kumpulkan portfolio visual notes dari semua mata pelajaran',
            '6 Bulan ke depan: Evaluasi peningkatan nilai akademis dengan metode visual learning'
          ],
          'Auditori': [
            'Minggu ini: Rekam dan dengarkan kembali materi kuliah/pelajaran',
            'Bulan ini: Bergabung dengan study group untuk diskusi rutin',
            '3 Bulan ke depan: Buat playlist podcast edukatif favorit dan dengarkan secara konsisten',
            '6 Bulan ke depan: Evaluasi kemampuan pemahaman melalui metode auditori'
          ],
          'Kinestetik': [
            'Minggu ini: Lakukan minimal 1 eksperimen atau praktik langsung',
            'Bulan ini: Daftar ke workshop atau pelatihan hands-on',
            '3 Bulan ke depan: Selesaikan 1 proyek praktis yang mengaplikasikan teori',
            '6 Bulan ke depan: Evaluasi peningkatan skill praktis Anda'
          ]
        },
        kemampuan: {
          'Logis-Matematis': [
            'Minggu ini: Selesaikan 5 soal problem solving challenging setiap hari',
            'Bulan ini: Mulai belajar 1 bahasa programming (Python/JavaScript)',
            '3 Bulan ke depan: Selesaikan 1 online course di programming atau data analytics',
            '6 Bulan ke depan: Buat 1 project portfolio yang menunjukkan kemampuan analitis'
          ],
          'Linguistik': [
            'Minggu ini: Tulis 500 kata per hari (blog, jurnal, atau artikel)',
            'Bulan ini: Baca minimal 2 buku dari genre berbeda',
            '3 Bulan ke depan: Mulai belajar 1 bahasa asing dengan target conversational level',
            '6 Bulan ke depan: Publikasikan karya tulis atau ikut kompetisi kepenulisan'
          ],
          'Kinestetik': [
            'Minggu ini: Latihan fisik minimal 30 menit setiap hari',
            'Bulan ini: Daftar kelas tari, martial arts, atau olahraga tim',
            '3 Bulan ke depan: Kuasai 1 skill manual baru (crafting, woodworking, dll)',
            '6 Bulan ke depan: Ikut kompetisi atau tampil dalam pertunjukan'
          ],
          'Visual-Spasial': [
            'Minggu ini: Latihan menggambar atau sketching setiap hari',
            'Bulan ini: Mulai belajar 1 software desain (Photoshop, Illustrator, Blender)',
            '3 Bulan ke depan: Selesaikan 5 project desain untuk portfolio',
            '6 Bulan ke depan: Ikut kompetisi desain atau pameran karya'
          ],
          'Musikal': [
            'Minggu ini: Latihan alat musik atau vokal minimal 1 jam per hari',
            'Bulan ini: Pelajari 3 lagu baru dengan tingkat kesulitan yang meningkat',
            '3 Bulan ke depan: Bergabung dengan band, choir, atau ensemble',
            '6 Bulan ke depan: Perform di depan publik atau rekam cover lagu'
          ],
          'Interpersonal': [
            'Minggu ini: Inisiasi percakapan bermakna dengan 3 orang baru',
            'Bulan ini: Bergabung dengan 1 organisasi atau komunitas',
            '3 Bulan ke depan: Ambil peran leadership dalam project kelompok',
            '6 Bulan ke depan: Mentoringkan atau mengajar orang lain'
          ],
          'Intrapersonal': [
            'Minggu ini: Mulai jurnal harian dengan refleksi mendalam',
            'Bulan ini: Tetapkan 3 tujuan personal dengan action plan',
            '3 Bulan ke depan: Praktikkan meditasi atau mindfulness 15 menit setiap hari',
            '6 Bulan ke depan: Evaluasi pencapaian tujuan dan revisi strategi'
          ],
          'Naturalis': [
            'Minggu ini: Amati dan dokumentasi 10 spesies tumbuhan/hewan lokal',
            'Bulan ini: Mulai berkebun atau merawat tanaman indoor',
            '3 Bulan ke depan: Ikut kegiatan konservasi atau field trip alam',
            '6 Bulan ke depan: Bergabung dengan komunitas environmental activist'
          ]
        },
        kepribadian: {
          'Openness': [
            'Minggu ini: Coba 1 aktivitas yang belum pernah dilakukan sebelumnya',
            'Bulan ini: Kunjungi museum, galeri seni, atau tempat budaya baru',
            '3 Bulan ke depan: Pelajari skill atau hobi yang completely different',
            '6 Bulan ke depan: Travel ke kota/negara baru untuk eksplorasi budaya'
          ],
          'Conscientiousness': [
            'Minggu ini: Buat daily planner dan ikuti 100% selama seminggu',
            'Bulan ini: Implementasi sistem produktivitas (GTD, Pomodoro, dll)',
            '3 Bulan ke depan: Audit dan optimasi semua workflow dan routine',
            '6 Bulan ke depan: Capai 95% completion rate untuk semua goals'
          ],
          'Extraversion': [
            'Minggu ini: Hadiri minimal 2 social gathering atau networking event',
            'Bulan ini: Inisiasi 1 acara atau project kolaboratif dengan teman',
            '3 Bulan ke depan: Presentasi atau speak di depan audience',
            '6 Bulan ke depan: Build network dengan 50+ kontak profesional baru'
          ],
          'Agreeableness': [
            'Minggu ini: Lakukan 1 random act of kindness setiap hari',
            'Bulan ini: Volunteer di organisasi sosial atau charity',
            '3 Bulan ke depan: Mediasi atau bantu resolve 1 konflik interpersonal',
            '6 Bulan ke depan: Latih assertiveness skills sambil maintain empathy'
          ],
          'Neuroticism': [
            'Minggu ini: Praktikkan breathing exercise 3x sehari',
            'Bulan ini: Mulai routine olahraga dan tidur yang konsisten',
            '3 Bulan ke depan: Ikuti program mindfulness atau stress management',
            '6 Bulan ke depan: Build healthy coping mechanisms dan support system'
          ]
        },
        minatMapel: {
          'Matematika': [
            'Minggu ini: Selesaikan soal olimpiade matematika tingkat dasar',
            'Bulan ini: Daftar online course di Khan Academy atau Coursera',
            '3 Bulan ke depan: Ikut kompetisi matematika atau programming',
            '6 Bulan ke depan: Research jurusan STEM dan plan untuk apply'
          ],
          'Bahasa': [
            'Minggu ini: Baca 1 novel sastra klasik atau kontemporer',
            'Bulan ini: Mulai belajar bahasa asing di Duolingo atau Babbel',
            '3 Bulan ke depan: Ikut lomba debat, pidato, atau menulis esai',
            '6 Bulan ke depan: Capai conversational level di 1 bahasa asing'
          ],
          'IPA': [
            'Minggu ini: Lakukan 1 eksperimen sains di rumah',
            'Bulan ini: Tonton science documentary dan catat insights',
            '3 Bulan ke depan: Join science club atau research program',
            '6 Bulan ke depan: Complete 1 independent research project'
          ],
          'IPS': [
            'Minggu ini: Baca berita dan analisis isu sosial-ekonomi terkini',
            'Bulan ini: Ikut Model UN atau simulasi bisnis',
            '3 Bulan ke depan: Volunteer di NGO atau organisasi sosial',
            '6 Bulan ke depan: Presentasi project tentang isu sosial di komunitas'
          ],
          'Olahraga': [
            'Minggu ini: Latihan fisik intensif 5x seminggu dengan program terstruktur',
            'Bulan ini: Bergabung dengan klub olahraga atau gym',
            '3 Bulan ke depan: Ikut minimal 1 kompetisi olahraga',
            '6 Bulan ke depan: Capai target fitness goal dan tingkatkan personal record'
          ],
          'Seni': [
            'Minggu ini: Buat 1 karya seni setiap hari (gambar, musik, dll)',
            'Bulan ini: Eksplorasi 3 medium artistik yang berbeda',
            '3 Bulan ke depan: Kumpulkan 10 karya terbaik untuk portfolio',
            '6 Bulan ke depan: Ikut pameran, kompetisi, atau showcase karya seni'
          ]
        }
      };
      
      return followUp[testType][category] || ['Terus kembangkan potensi diri secara konsisten'];
    }

    async function downloadSinglePDF(testType) {
      showToast('Mempersiapkan PDF...');
      
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF('p', 'mm', 'a4');
      const biodata = JSON.parse(localStorage.getItem('mappaguru_biodata'));
      const savedAnswers = localStorage.getItem(`mappaguru_${testType}`);
      const result = calculateResult(testType, JSON.parse(savedAnswers));
      const test = testData[testType];
      const sortedResult = Object.entries(result).sort((a, b) => b[1] - a[1]);
      const topCategory = sortedResult[0];
      const recommendations = getRecommendations(testType, topCategory[0]);
      const followUp = getFollowUp(testType, topCategory[0]);
      
      let yPos = 20;
      
      // Header
      doc.setFillColor(102, 126, 234);
      doc.rect(0, 0, 210, 35, 'F');
      doc.setTextColor(255, 255, 255);
      doc.setFontSize(20);
      doc.setFont(undefined, 'bold');
      doc.text('MAPPAGURU ONLINE', 105, 15, { align: 'center' });
      doc.setFontSize(14);
      doc.text('Asesmen Online', 105, 23, { align: 'center' });
      doc.setFontSize(10);
      doc.text(new Date().toLocaleDateString('id-ID', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }), 105, 30, { align: 'center' });
      
      yPos = 45;
      doc.setTextColor(0, 0, 0);
      
      // Biodata
      doc.setFontSize(12);
      doc.setFont(undefined, 'bold');
      doc.text('Data Peserta:', 15, yPos);
      yPos += 7;
      doc.setFont(undefined, 'normal');
      doc.setFontSize(10);
      doc.text(`Nama: ${biodata.nama}`, 15, yPos);
      yPos += 5;
      doc.text(`Umur: ${biodata.umur} tahun`, 15, yPos);
      yPos += 5;
      doc.text(`Jenis Kelamin: ${biodata.jenisKelamin}`, 15, yPos);
      yPos += 10;
      
      // Test Title
      doc.setFillColor(240, 240, 240);
      doc.rect(15, yPos - 5, 180, 10, 'F');
      doc.setFontSize(14);
      doc.setFont(undefined, 'bold');
      doc.setTextColor(102, 126, 234);
      doc.text(test.title, 105, yPos, { align: 'center' });
      yPos += 8;
      doc.setFontSize(9);
      doc.setTextColor(100, 100, 100);
      doc.setFont(undefined, 'italic');
      doc.text(test.description, 105, yPos, { align: 'center' });
      yPos += 12;
      
      // Hasil Dominan
      doc.setTextColor(0, 0, 0);
      doc.setFontSize(12);
      doc.setFont(undefined, 'bold');
      doc.text('Hasil Dominan:', 15, yPos);
      yPos += 7;
      doc.setFontSize(16);
      doc.setTextColor(102, 126, 234);
      doc.text(`${topCategory[0]}: ${topCategory[1]}/5.0`, 15, yPos);
      yPos += 10;
      
      // Detail Semua Hasil
      doc.setTextColor(0, 0, 0);
      doc.setFontSize(12);
      doc.setFont(undefined, 'bold');
      doc.text('Detail Semua Hasil:', 15, yPos);
      yPos += 7;
      doc.setFont(undefined, 'normal');
      doc.setFontSize(10);
      
      sortedResult.forEach((item, index) => {
        if (yPos > 270) {
          doc.addPage();
          yPos = 20;
        }
        doc.text(`${index + 1}. ${item[0]}: ${item[1]}/5.0`, 15, yPos);
        yPos += 6;
      });
      yPos += 5;
      
      // Interpretasi
      if (yPos > 250) {
        doc.addPage();
        yPos = 20;
      }
      doc.setFontSize(12);
      doc.setFont(undefined, 'bold');
      doc.text('Interpretasi:', 15, yPos);
      yPos += 7;
      doc.setFont(undefined, 'normal');
      doc.setFontSize(10);
      const interpretation = getInterpretation(testType, topCategory[0]);
      const interpretationLines = doc.splitTextToSize(interpretation, 180);
      interpretationLines.forEach(line => {
        if (yPos > 280) {
          doc.addPage();
          yPos = 20;
        }
        doc.text(line, 15, yPos);
        yPos += 5;
      });
      yPos += 5;
      
      // Rekomendasi
      if (yPos > 250) {
        doc.addPage();
        yPos = 20;
      }
      doc.setFontSize(12);
      doc.setFont(undefined, 'bold');
      doc.text('Rekomendasi:', 15, yPos);
      yPos += 7;
      doc.setFont(undefined, 'normal');
      doc.setFontSize(10);
      
      recommendations.forEach((rec, index) => {
        if (yPos > 275) {
          doc.addPage();
          yPos = 20;
        }
        const recLines = doc.splitTextToSize(`${index + 1}. ${rec}`, 175);
        recLines.forEach(line => {
          if (yPos > 280) {
            doc.addPage();
            yPos = 20;
          }
          doc.text(line, 15, yPos);
          yPos += 5;
        });
        yPos += 2;
      });
      yPos += 5;
      
      // Rencana Tindak Lanjut
      if (yPos > 250) {
        doc.addPage();
        yPos = 20;
      }
      doc.setFontSize(12);
      doc.setFont(undefined, 'bold');
      doc.text('Rencana Tindak Lanjut:', 15, yPos);
      yPos += 7;
      doc.setFont(undefined, 'normal');
      doc.setFontSize(10);
      
      followUp.forEach((action, index) => {
        if (yPos > 275) {
          doc.addPage();
          yPos = 20;
        }
        const actionLines = doc.splitTextToSize(`${index + 1}. ${action}`, 175);
        actionLines.forEach(line => {
          if (yPos > 280) {
            doc.addPage();
            yPos = 20;
          }
          doc.text(line, 15, yPos);
          yPos += 5;
        });
        yPos += 2;
      });
      
      // Footer
      const pageCount = doc.internal.getNumberOfPages();
      for (let i = 1; i <= pageCount; i++) {
        doc.setPage(i);
        doc.setFontSize(8);
        doc.setTextColor(150, 150, 150);
        doc.text(`Halaman ${i} dari ${pageCount}`, 105, 290, { align: 'center' });
        doc.text('MAPPAGURU ONLINE - Asesmen Online', 105, 285, { align: 'center' });
      }
      
      doc.save(`${biodata.nama}_${test.title.replace(/\s+/g, '_')}.pdf`);
      showToast('PDF berhasil diunduh!');
    }
    
    async function downloadAllPDF() {
      showToast('Mempersiapkan PDF lengkap...');
      
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF('p', 'mm', 'a4');
      const biodata = JSON.parse(localStorage.getItem('mappaguru_biodata'));
      const tests = ['gayaBelajar', 'kemampuan', 'kepribadian', 'minatMapel'];
      
      let yPos = 20;
      
      // Cover Page
      doc.setFillColor(102, 126, 234);
      doc.rect(0, 0, 210, 297, 'F');
      doc.setTextColor(255, 255, 255);
      doc.setFontSize(28);
      doc.setFont(undefined, 'bold');
      doc.text('MAPPAGURU ONLINE', 105, 80, { align: 'center' });
      doc.setFontSize(18);
      doc.text('Asesmen Online', 105, 95, { align: 'center' });
      doc.setFontSize(14);
      doc.text('Laporan Lengkap Hasil Tes', 105, 110, { align: 'center' });
      
      doc.setFontSize(16);
      doc.text(biodata.nama, 105, 140, { align: 'center' });
      doc.setFontSize(12);
      doc.text(`${biodata.umur} tahun - ${biodata.jenisKelamin}`, 105, 150, { align: 'center' });
      
      doc.setFontSize(10);
      doc.text(new Date().toLocaleDateString('id-ID', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }), 105, 270, { align: 'center' });
      
      // Process each test
      for (const testType of tests) {
        const savedAnswers = localStorage.getItem(`mappaguru_${testType}`);
        if (!savedAnswers) continue;
        
        doc.addPage();
        yPos = 20;
        
        const result = calculateResult(testType, JSON.parse(savedAnswers));
        const test = testData[testType];
        const sortedResult = Object.entries(result).sort((a, b) => b[1] - a[1]);
        const topCategory = sortedResult[0];
        const recommendations = getRecommendations(testType, topCategory[0]);
        const followUp = getFollowUp(testType, topCategory[0]);
        
        // Test Header
        doc.setFillColor(102, 126, 234);
        doc.rect(0, 0, 210, 35, 'F');
        doc.setTextColor(255, 255, 255);
        doc.setFontSize(18);
        doc.setFont(undefined, 'bold');
        doc.text(test.title, 105, 15, { align: 'center' });
        doc.setFontSize(11);
        doc.setFont(undefined, 'italic');
        doc.text(test.description, 105, 25, { align: 'center' });
        
        yPos = 45;
        doc.setTextColor(0, 0, 0);
        
        // Hasil Dominan
        doc.setFontSize(12);
        doc.setFont(undefined, 'bold');
        doc.text('Hasil Dominan:', 15, yPos);
        yPos += 7;
        doc.setFontSize(16);
        doc.setTextColor(102, 126, 234);
        doc.text(`${topCategory[0]}: ${topCategory[1]}/5.0`, 15, yPos);
        yPos += 10;
        
        // Detail Hasil
        doc.setTextColor(0, 0, 0);
        doc.setFontSize(12);
        doc.setFont(undefined, 'bold');
        doc.text('Detail Semua Hasil:', 15, yPos);
        yPos += 7;
        doc.setFont(undefined, 'normal');
        doc.setFontSize(10);
        
        sortedResult.forEach((item, index) => {
          if (yPos > 270) {
            doc.addPage();
            yPos = 20;
          }
          doc.text(`${index + 1}. ${item[0]}: ${item[1]}/5.0`, 15, yPos);
          yPos += 6;
        });
        yPos += 5;
        
        // Interpretasi
        if (yPos > 250) {
          doc.addPage();
          yPos = 20;
        }
        doc.setFontSize(12);
        doc.setFont(undefined, 'bold');
        doc.text('Interpretasi:', 15, yPos);
        yPos += 7;
        doc.setFont(undefined, 'normal');
        doc.setFontSize(10);
        const interpretation = getInterpretation(testType, topCategory[0]);
        const interpretationLines = doc.splitTextToSize(interpretation, 180);
        interpretationLines.forEach(line => {
          if (yPos > 280) {
            doc.addPage();
            yPos = 20;
          }
          doc.text(line, 15, yPos);
          yPos += 5;
        });
        yPos += 5;
        
        // Rekomendasi
        if (yPos > 240) {
          doc.addPage();
          yPos = 20;
        }
        doc.setFontSize(12);
        doc.setFont(undefined, 'bold');
        doc.text('Rekomendasi:', 15, yPos);
        yPos += 7;
        doc.setFont(undefined, 'normal');
        doc.setFontSize(10);
        
        recommendations.forEach((rec, index) => {
          if (yPos > 270) {
            doc.addPage();
            yPos = 20;
          }
          const recLines = doc.splitTextToSize(`${index + 1}. ${rec}`, 175);
          recLines.forEach(line => {
            if (yPos > 275) {
              doc.addPage();
              yPos = 20;
            }
            doc.text(line, 15, yPos);
            yPos += 5;
          });
          yPos += 2;
        });
        yPos += 5;
        
        // Rencana Tindak Lanjut
        if (yPos > 240) {
          doc.addPage();
          yPos = 20;
        }
        doc.setFontSize(12);
        doc.setFont(undefined, 'bold');
        doc.text('Rencana Tindak Lanjut:', 15, yPos);
        yPos += 7;
        doc.setFont(undefined, 'normal');
        doc.setFontSize(10);
        
        followUp.forEach((action, index) => {
          if (yPos > 270) {
            doc.addPage();
            yPos = 20;
          }
          const actionLines = doc.splitTextToSize(`${index + 1}. ${action}`, 175);
          actionLines.forEach(line => {
            if (yPos > 275) {
              doc.addPage();
              yPos = 20;
            }
            doc.text(line, 15, yPos);
            yPos += 5;
          });
          yPos += 2;
        });
      }
      
      // Footer on all pages
      const pageCount = doc.internal.getNumberOfPages();
      for (let i = 1; i <= pageCount; i++) {
        doc.setPage(i);
        doc.setFontSize(8);
        doc.setTextColor(150, 150, 150);
        doc.text(`Halaman ${i} dari ${pageCount}`, 105, 290, { align: 'center' });
        if (i > 1) {
          doc.text('MAPPAGURU ONLINE - Asesmen Online', 105, 285, { align: 'center' });
        }
      }
      
      doc.save(`${biodata.nama}_Laporan_Lengkap_Asesmen.pdf`);
      showToast('PDF lengkap berhasil diunduh!');
    }
    
    function backToMenu() {
      document.getElementById('resultsSection').classList.add('hidden');
      document.getElementById('testMenuSection').classList.remove('hidden');
    }

    function backToMenuFromTest() {
      const confirmBack = confirm('Apakah Anda yakin ingin kembali ke menu? Jawaban Anda akan tersimpan.');
      if (confirmBack) {
        document.getElementById('testSection').classList.add('hidden');
        document.getElementById('testMenuSection').classList.remove('hidden');
      }
    }

    function showToast(message) {
      const toast = document.createElement('div');
      toast.className = 'fixed top-20 right-6 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-4 rounded-lg shadow-lg z-50';
      toast.textContent = message;
      document.body.appendChild(toast);
      
      setTimeout(() => {
        toast.remove();
      }, 3000);
    }
    
    function showDeveloperInfo() {
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
      modal.innerHTML = `
        <div class="bg-white rounded-2xl p-6 sm:p-8 max-w-2xl w-full shadow-2xl max-h-[90vh] flex flex-col">
          <div class="text-center mb-6">
            <div class="inline-block bg-gradient-to-r from-teal-500 to-cyan-600 text-white rounded-full p-4 mb-4">
              <svg class="w-12 h-12 sm:w-16 sm:h-16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
              </svg>
            </div>
            <h3 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-2">Pembuat Aplikasi</h3>
            <p class="text-sm sm:text-base text-gray-600">MAPPAGURU Online - Asesmen Online</p>
          </div>
          
          <div class="overflow-y-auto flex-1 mb-6 pr-2" style="scrollbar-width: thin; scrollbar-color: #14b8a6 #f0f9ff;">
            <div class="bg-gradient-to-br from-teal-50 to-cyan-50 rounded-xl p-6 mb-6 border-2 border-teal-200">
              <div class="space-y-4">
                <div class="flex items-start gap-3">
                  <div class="bg-teal-500 text-white rounded-full p-2 flex-shrink-0">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                  </div>
                  <div>
                    <p class="text-xs sm:text-sm text-gray-600 font-semibold">Nama Lengkap</p>
                    <p class="text-base sm:text-lg font-bold text-gray-800">Muhammad Hasratul, S.Pd.,Gr.,M.M</p>
                  </div>
                </div>
                
                <div class="flex items-start gap-3">
                  <div class="bg-teal-500 text-white rounded-full p-2 flex-shrink-0">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                  </div>
                  <div>
                    <p class="text-xs sm:text-sm text-gray-600 font-semibold">Tempat, Tanggal Lahir</p>
                    <p class="text-base sm:text-lg font-bold text-gray-800">Bone, 21 Maret 1991</p>
                  </div>
                </div>
                
                <div class="flex items-start gap-3">
                  <div class="bg-teal-500 text-white rounded-full p-2 flex-shrink-0">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                    </svg>
                  </div>
                  <div>
                    <p class="text-xs sm:text-sm text-gray-600 font-semibold">Asal Sekolah</p>
                    <p class="text-base sm:text-lg font-bold text-gray-800">SMP Negeri 16 Makassar</p>
                  </div>
                </div>
                
                <div class="flex items-start gap-3">
                  <div class="bg-teal-500 text-white rounded-full p-2 flex-shrink-0">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                    </svg>
                  </div>
                  <div>
                    <p class="text-xs sm:text-sm text-gray-600 font-semibold">Kontak Person</p>
                    <a href="tel:085259259767" class="text-base sm:text-lg font-bold text-teal-600 hover:text-teal-700 transition-colors">085259259767</a>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 sm:p-6 border border-blue-200">
              <div class="flex items-start gap-3">
                <svg class="w-6 h-6 text-blue-600 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <div>
                  <p class="text-sm sm:text-base text-gray-700 leading-relaxed">
                    Aplikasi ini dikembangkan untuk membantu peserta didik memahami gaya belajar, kemampuan, kepribadian, dan minat akademik mereka melalui asesmen online yang komprehensif dan berbasis teori psikologi yang valid.
                  </p>
                </div>
              </div>
            </div>
          </div>
          
          <button onclick="closeDeveloperInfo()" class="w-full bg-gradient-to-r from-teal-500 to-cyan-600 text-white font-bold py-3 sm:py-4 rounded-lg hover:from-teal-600 hover:to-cyan-700 transition-all text-sm sm:text-base">
            Tutup
          </button>
        </div>
      `;
      document.body.appendChild(modal);
      window.currentDeveloperModal = modal;
    }
    
    function closeDeveloperInfo() {
      if (window.currentDeveloperModal) {
        window.currentDeveloperModal.remove();
        window.currentDeveloperModal = null;
      }
    }
    
    function resetAllTests() {
      // Create custom modal instead of using confirm()
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
      modal.innerHTML = `
        <div class="bg-white rounded-xl p-6 sm:p-8 max-w-md w-full shadow-2xl">
          <div class="text-center mb-6">
            <div class="inline-block bg-red-100 text-red-600 rounded-full p-4 mb-4">
              <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
              </svg>
            </div>
            <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-2">Konfirmasi Reset</h3>
            <p class="text-sm sm:text-base text-gray-600">Apakah Anda yakin ingin menghapus semua hasil tes? Tindakan ini tidak dapat dibatalkan.</p>
          </div>
          <div class="flex gap-3 sm:gap-4">
            <button onclick="closeResetModal()" class="flex-1 bg-gray-300 text-gray-700 font-semibold py-2.5 sm:py-3 px-4 rounded-lg hover:bg-gray-400 transition-all text-sm sm:text-base">
              Batal
            </button>
            <button onclick="confirmResetAllTests()" class="flex-1 bg-gradient-to-r from-red-500 to-rose-600 text-white font-semibold py-2.5 sm:py-3 px-4 rounded-lg hover:from-red-600 hover:to-rose-700 transition-all text-sm sm:text-base">
              Ya, Hapus Semua
            </button>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
      window.currentResetModal = modal;
    }
    
    function closeResetModal() {
      if (window.currentResetModal) {
        window.currentResetModal.remove();
        window.currentResetModal = null;
      }
    }
    
    function confirmResetAllTests() {
      const tests = ['gayaBelajar', 'kemampuan', 'kepribadian', 'minatMapel'];
      
      tests.forEach(testType => {
        localStorage.removeItem(`mappaguru_${testType}`);
      });
      
      closeResetModal();
      showToast('Semua hasil tes berhasil dihapus!');
      
      setTimeout(() => {
        backToMenu();
      }, 1500);
    }

    async function onConfigChange(newConfig) {
      config = { ...config, ...newConfig };
      
      document.getElementById('appTitle').textContent = config.app_title;
      document.getElementById('developerName').textContent = config.developer_name;
      
      const gradientBg = document.querySelector('.gradient-bg');
      gradientBg.style.background = `linear-gradient(135deg, ${config.primary_color} 0%, ${config.secondary_color} 100%)`;
      
      document.getElementById('appTitle').style.color = config.text_color;
      
      const buttons = document.querySelectorAll('.btn-primary');
      buttons.forEach(btn => {
        btn.style.background = `linear-gradient(to right, ${config.accent_color}, ${config.primary_color})`;
      });
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.primary_color || defaultConfig.primary_color,
              set: (value) => {
                config.primary_color = value;
                window.elementSdk.setConfig({ primary_color: value });
              }
            },
            {
              get: () => config.secondary_color || defaultConfig.secondary_color,
              set: (value) => {
                config.secondary_color = value;
                window.elementSdk.setConfig({ secondary_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            },
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.accent_color || defaultConfig.accent_color,
              set: (value) => {
                config.accent_color = value;
                window.elementSdk.setConfig({ accent_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (config) => new Map([
          ["app_title", config.app_title || defaultConfig.app_title],
          ["developer_name", config.developer_name || defaultConfig.developer_name]
        ])
      });
    }

    // Initialize
    updateDateTime();
    loadBiodata();
    
    // Check if biodata exists, show test menu
    const savedBiodata = localStorage.getItem('mappaguru_biodata');
    if (savedBiodata) {
      showTestMenu();
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ace5abf11946bfa',t:'MTc2NTU1NDM4Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
